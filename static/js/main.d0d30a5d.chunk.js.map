{"version":3,"sources":["features/visualization/Visualization.module.css","features/hierarchy-selector/AvailableFieldList.module.css","features/header/crlogo.png","features/dataset-controls/DatasetControls.module.css","features/header/Header.js","features/hierarchy-selector/SelectedField.js","features/hierarchy-selector/SelectedFieldList.js","features/hierarchy-selector/AvailableField.js","features/hierarchy-selector/AvailableFieldList.js","features/hierarchy-selector/DropTarget.js","features/hierarchy-selector/HierarchySelector.js","features/misc-controls/FieldSelect.js","features/misc-controls/MiscControls.js","epics/search-dataset-epic.js","features/search/SearchControls.js","features/visualization/d3-viz/pack-grid.js","features/visualization/d3-viz/pack-with-label.js","features/visualization/d3-viz/to-hierarchy.js","features/visualization/d3-viz/datum-key.js","features/visualization/d3-viz/append-circles.js","features/visualization/d3-viz/text-utils.js","features/visualization/d3-viz/setup-zoom.js","features/visualization/d3-viz/setup-tooltip.js","features/visualization/d3-viz/color-scheme.js","features/visualization/d3-viz/setup-legend.js","features/visualization/d3-viz.js","features/visualization/Visualization.js","epics/refresh-dataset-epic.js","epics/upload-dataset-epic.js","features/dataset-controls/DatasetSelector.js","features/dataset-controls/DatasetUpload.js","features/dataset-controls/DatasetDownload.js","features/dataset-controls/DatasetRefresh.js","features/dataset-controls/DatasetTimedRefresh.js","features/dataset-controls/DatasetControls.js","App.js","registerServiceWorker.js","domain/root-reducer.js","epics/root-epic.js","configure-store.js","index.js","epics/index-dataset-epic.js","App.module.css","epics/fetch-dataset-epic.js","epics/load-dataset-epic.js","features/misc-controls/MiscControls.module.css","features/header/Header.module.css","domain/dataset.js","domain/controls.js","features/search/SearchControls.module.css","features/hierarchy-selector/SelectedFieldList.module.css"],"names":["module","exports","viz","listContainer","draggableContainer","dragForeignContainer","isDraggingOver","field","dragForeign","groupBy","fieldName","dataControls","selectorContainer","uploadContainer","selector","fileUpload","label","utilityContainer","fileDownload","urlRefreshContainer","urlRefresh","urlContainer","modal","modalMain","centerSpan","header_Header","state","showInfo","hideTooltip","_this","setState","showTooltip","react_default","a","createElement","className","Header_module_default","header","src","crlogo_default","logo","alt","appName","infoIcon","id","onMouseEnter","this","onMouseLeave","index_es","icon","free_solid_svg_icons_index_es","lib_default","active","position","parent","tooltipTimeout","infoPopup","href","Component","Field","_ref2","_classNames","style","displayName","dragIndex","animated","provided","Object","assign","draggable","ref","innerRef","draggableProps","dragHandleProps","classnames_default","classNames","_defineProperty","placeholder","hierarchy_selector_SelectedField","_ref","index","draggableId","react_beautiful_dnd_esm","type","snapshot","SelectedFieldList_SelectedFieldList","lastFields","toAnimate","props","getFieldId","ramda_es","fields","length","_this2","_this$props","droppableId","dragState","draggingOver","SelectedFieldList_isDraggingOver","droppableProps","droppable","List","destination","map","key","SelectedFieldList_dragIndex","source","from","to","Math","min","max","defaultProps","hierarchy_selector_SelectedFieldList","prop_types_default","shape","string","isRequired","hierarchy_selector_AvailableField","_objectSpread","transform","isDragging","AvailableFieldList","values","AvailableFieldList_isDraggingForeign","AvailableFieldList_defineProperty","getCount","count","concat","withPlaceholder","hierarchy_selector_AvailableFieldList","hierarchy_selector_DropTarget","isDropDisabled","DropTarget_defineProperty","_classNames2","dropTarget","SELECTED_FIELD_LIST_ID","DROP_TARGET_ID","HierarchySelector_HierarchySelector","onDragStart","dragStart","onDragUpdate","dragUpdate","onDragEnd","dropResult","updateHierarchy","controls","hierarchyConfig","removeField","fieldId","newIndex","configuration","HierarchySelector_findFieldIndex","domain_dataset","removeOld","addNew","updatedHierarchy","setHierarchyConfig","showNodes","availableFields","filter","f","groupable","marginBottom","SelectedFieldList_module_default","AvailableFieldList_module_default","list","matchId","HierarchySelector_mapDispatchToProps","domain_controls","hierarchy_selector_HierarchySelector","es","FieldSelect_getCount","fieldToString","path","array","FieldSelect_stringToField","misc_controls_FieldSelect","value","onChange","name","evt","target","misc_controls_MiscControls","dispatch","shouldShowNodes","useDarkTheme","darkTheme","colorBy","MiscControls_module_default","container","checkboxContainer","checked","htmlFor","fieldSelect","searchDataset","createAction","performSearch","data","results","toFind","queryString","idx","searchIndex","search","toLowerCase","dataset","forEach","el","isSearchResult","r","push","action$","store","ofType","toString","pipe","mergeMap","payload","of","tap","index_dataset_epic","catchError","error","lunr","alert","message","empty","defaultState","hasSearch","SearchControls_Search","handleQueryStringChange","e","handleKeyPress","handleSearch","SearchControls_module_default","searchContainer","onKeyPress","onClick","clearSearch","SearchControls_mapDispatchToProps","SearchControls","ownProps","eachWithIndex","pack_grid_placeRows","rows","pack_grid_middleOut","maxRadii","maxRadius","ys","pack_grid_coordinatesForRadii","xs","row","i","node","j","x","y","apply","_toConsumableArray","c","radii","diameters","first","coords","_slicedToArray","lastRadius","currentRadius","above","_","below","pack_grid_pickOdd","pack_grid_toRows","circles","ceil","sqrt","pack_grid","enclosingCircle","d3_hierarchy","radiusLeaf","radius","children","getLabelSize","labelRatio","pack_with_label_packChildren","packSiblings","maxLabelRatio","padding","k","nonleafChildren","child","height","labelSize","pack_with_label_toConsumableArray","paddingSize","enclosingRadius","translateChild","labelY","labelWidth","pow","pack_with_label","options","size","pack","root","eachBefore","eachAfter","d","keys","arguments","to_hierarchy_nestHierarchy","nest","d3_collection","to_hierarchy_countSearchResults","countSearchResults","result","searchResultCount","to_hierarchy_entriesToHierarchy","entriesToHierarchy","fieldValue","entries","to_hierarchy_getLeaves","entry","getLeaves","to_hierarchy","nesting","datum_key","datumKey","datum","depth","join","uid","append_circles_getLabelShape","top","startAngle","PI","acos","endAngle","d3_path","arc","closePath","append_circles_className","append_circles","nodeRoot","labelRoot","packedData","descendants","nodes","selectAll","exit","remove","nodesEnter","enter","append","classed","merge","attr","order","select","labels","labelsEnter","countLabels","countLabelsEnter","text","context","document","getContext","measureText","font","floor","width","fitText","original","textLength","slice","String","fromCharCode","hideSmall","tooSmall","setup_zoom_fitCounts","countHeight","viewBound","fitVertically","labelText","maxWidth","d3_zoom","translate","applyX","applyY","setup_zoom_fitLabels","labelFont","labelHeight","setup_zoom_viewBound","boundWidth","boundHeight","nodeBound","boundOverlap","bound0","bound1","setup_zoom_getLabelStyle","domElement","family","getComputedStyle","getPropertyValue","setup_zoom","zoomRoot","transformRoot","zoomTo","zoomToTransform","zoomBehavior","on","event","d3_selection","call","viewPadding","rootR","rootX","rootY","scaleExtent","leaves","translateExtent","_getLabelStyle2","setup_zoom_slicedToArray","_getLabelStyle4","countLabelFont","countLabelHeight","bound","nodesInView","labelsInView","labelsNotInView","countLabelsInView","hiddenCountLabels","animate","undefined","scale","transition","duration","setup_tooltip_showTooltip","offsetTop","offsetLeft","tooltip","setup_tooltip_content","innerHTML","cont","pairs","setup_tooltip","boundingRect","getBoundingClientRect","left","color_scheme_colorScheme","color_scheme_extendColorScheme","colorScheme","extraLayers","extraColors","currentLayer","previous","d3_color","neighbor","hScale","d3_scale","domain","range","h","cScale","exponent","lScale","l","setup_legend_updateLegend","_ref4","legend","colorMap","toggleValue","items","_ref5","setup_legend_slicedToArray","itemsEnter","disabled","_ref7","_ref8","color","_ref9","_ref11","setup_legend_createStylesheet","coloring","styleEnter","html","_ref13","_ref14","_ref14$","setup_legend_colorNodes","_ref15","getValue","coloredField","isColoringGroup","_ref16","_ref18","setup_legend","legendConfig","update","configs","_ref3","d3_viz_allEqProps","o1","o2","d3_viz_makeHierarchy","sort","d3_viz_composeComparators","b","localeCompare","comparators","comparator","d3_viz_findAncestor","hierarchy","ancestors","last","findChild","d3_viz","rootNode","svg","clientWidth","clientHeight","zoom","selectedNode","nextProps","d3_viz_objectSpread","dataUpdated","sizeUpdated","legendUpdated","repack","rerender","resetLegend","resetZoom","css_element_queries","lodash_debounce_default","_appendCircles2","d3_viz_slicedToArray","selected","Visualization_Visualization","react_dom_default","findDOMNode","updateFromProps","Visualization_module_default","PureComponent","visualization_Visualization","startRefresh","stopRefresh","operators","debounceTime","action","url","interval","timer","mapTo","fetch_dataset_epic","takeUntil","uploadDataset","upload_dataset_epic_fromReader","file","Observable","create","observer","reader","window","FileReader","addEventListener","next","complete","readAsText","load_dataset_epic","JSON","parse","SyntaxError","eqUrl","dataset_controls_DatasetSelector","datasets","dataset_controls_DatasetUpload","files","dataset_controls_DatasetDownload","download","title","dataset_controls_DatasetRefresh","DatasetTimedRefresh","timerIsRunning","onIntervalChange","onStartClick","onStopClick","CUSTOM_DATASET","authTypes","scheme","host","location","hostname","port","indexOf","parseInt","split","POSEIDON_DATASET","react_modal_lib_default","setAppElement","DatasetControls_DatasetControls","selectedFile","showUrlEntry","authScheme","token","username","password","refreshInterval","refreshTimerRunning","resetDataset","setDataset","fetchAndSetDataset","authHeader","toURL","fetchDataset","onSelected","onUpload","onUrlChange","onTokenChange","onUsernameChange","onPasswordChange","onUrlOk","onUrlCancel","getDownloadUrl","urlObject","URL","webkitURL","json","stringify","blob","Blob","createObjectURL","onRefresh","onTimedRefreshStart","onTimedRefreshStop","onTimedRefreshIntervalChanged","numInt","isNaN","canDownload","canRefresh","DatasetControls_module_default","DatasetControls_toConsumableArray","isOpen","onRequestClose","contentLabel","at","Token","userName","TypeError","DatasetControls_mapDispatchToProps","selectDataset","dataset_controls_DatasetControls","App_App","hasDataset","App_defineProperty","App_module_default","appContainer","hideControls","section","src_datasets","hierarchySection","canvas","react","src_App","isLocalhost","Boolean","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","root_reducer","redux","root_epic","combineEpics","upload_dataset_epic","search_dataset_epic","refresh_dataset_epic","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","src_store","initialState","middleware","createEpicMiddleware","run","configure_store","render","getElementById","origin","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","__webpack_require__","buildIndex","setSearchResults","getSearchResults","searchResults","getQueryString","getSearchIndex","searchReducer","generateIndex","domain_dataset__WEBPACK_IMPORTED_MODULE_5__","flat","ds","cfg","flattened","ramda__WEBPACK_IMPORTED_MODULE_1__","item","flattenDataset","add","redux_observable__WEBPACK_IMPORTED_MODULE_0__","rxjs_operators__WEBPACK_IMPORTED_MODULE_3__","rxjs__WEBPACK_IMPORTED_MODULE_2__","rxjs_operators__WEBPACK_IMPORTED_MODULE_4__","buildIndexSuccess","redux_actions__WEBPACK_IMPORTED_MODULE_0__","buildAuthHeader","getScheme","Authorization","Buffer","bearer","ajax","rxjs_ajax__WEBPACK_IMPORTED_MODULE_3__","redux_observable__WEBPACK_IMPORTED_MODULE_1__","rxjs_operators__WEBPACK_IMPORTED_MODULE_5__","crossDomain","responseType","rxjs_operators__WEBPACK_IMPORTED_MODULE_6__","_load_dataset_epic__WEBPACK_IMPORTED_MODULE_8__","rxjs_operators__WEBPACK_IMPORTED_MODULE_7__","loadDataset","CSVconvert","lines","trim","delimiter","hdr","delims","delim","finddelim","jsonstring","colnames","formatPayload","config","temp","ramda__WEBPACK_IMPORTED_MODULE_8__","Array","ValidationError","obj","prototype","Error","domain_dataset__WEBPACK_IMPORTED_MODULE_10__","_index_dataset_epic__WEBPACK_IMPORTED_MODULE_9__","domain_controls__WEBPACK_IMPORTED_MODULE_11__","rxjs__WEBPACK_IMPORTED_MODULE_3__","tagline","fieldsFor","overrides","paths","pathsIn","ramda__WEBPACK_IMPORTED_MODULE_2__","override","configurationFor","reducer","redux_actions__WEBPACK_IMPORTED_MODULE_1__","handleActions","valuesFor","selectConfiguration","selectValues","__webpack_exports__","_handleActions","selectControls","searchControls","groupByEnter","dragHandle"],"mappings":"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","file":"static/js/main.d0d30a5d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"viz\":\"Visualization_viz__ukgQP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listContainer\":\"AvailableFieldList_listContainer__2KZDy\",\"draggableContainer\":\"AvailableFieldList_draggableContainer__2hWW0\",\"dragForeignContainer\":\"AvailableFieldList_dragForeignContainer__oOWRp\",\"isDraggingOver\":\"AvailableFieldList_isDraggingOver__2TP5O\",\"field\":\"AvailableFieldList_field__Kmr7D\",\"dragForeign\":\"AvailableFieldList_dragForeign__pv234\",\"groupBy\":\"AvailableFieldList_groupBy__2BCem\",\"fieldName\":\"AvailableFieldList_fieldName__1-ueu\"};","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dataControls\":\"DatasetControls_dataControls__2WPxV\",\"selectorContainer\":\"DatasetControls_selectorContainer__3zdeO\",\"uploadContainer\":\"DatasetControls_uploadContainer__izwKQ\",\"selector\":\"DatasetControls_selector__1-ZPD\",\"fileUpload\":\"DatasetControls_fileUpload__1vorY\",\"label\":\"DatasetControls_label__3bRl3\",\"utilityContainer\":\"DatasetControls_utilityContainer__3RsyZ\",\"fileDownload\":\"DatasetControls_fileDownload__3N8pM\",\"urlRefreshContainer\":\"DatasetControls_urlRefreshContainer__2BOh7\",\"urlRefresh\":\"DatasetControls_urlRefresh__hpLj8\",\"urlContainer\":\"DatasetControls_urlContainer__2iQFV\",\"modal\":\"DatasetControls_modal__2nY-_\",\"modalMain\":\"DatasetControls_modalMain__3s5YH\",\"centerSpan\":\"DatasetControls_centerSpan__2HEg3\"};","import React from 'react';\nimport ToolTip from 'react-portal-tooltip'\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\n\nimport logo from './crlogo.png';\nimport style from './Header.module.css';\n\nclass Header extends React.Component {\n\n\tstate ={\n\t\tshowInfo: false\n\t}\n\n\thideTooltip = () => {\n\t\tthis.setState({\n\t\t\tshowInfo: false\n\t\t})\n\t}\n\n\tshowTooltip = () =>  {\n\t\tthis.setState({\n\t\t\tshowInfo: true\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={ style.header }>\n\t\t\t  <img src={ logo } className={ style.logo } alt='' />\n\t\t\t  <span className={ style.appName }>CRviz</span>\n\t\t\t  <span className={ style.infoIcon }>\n\t\t\t\t<label id=\"showInfo\" onMouseEnter={this.showTooltip} onMouseLeave={this.hideTooltip}>\n\t\t\t      <FontAwesomeIcon icon={faInfoCircle} />\n\t\t\t    </label>\n\t\t\t    <ToolTip active={this.state.showInfo} position=\"bottom\" parent=\"#showInfo\" tooltipTimeout={250}>\n\t\t\t      <div className={ style.infoPopup }>\n\t\t\t        About CRviz:<br/>\n\t\t\t        Home: <a href=\"https://www.cyberreboot.org/projects/crviz/\">https://www.cyberreboot.org/projects/crviz/</a><br/>\n\t\t\t        Version: { process.env.REACT_APP_VERSION } <br/>\n\t\t\t        Copyright  2018 In-Q-Tel, Inc.\n\t\t\t      </div>\n\t\t\t    </ToolTip>\n\t    \t  </span>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Header;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Draggable } from \"react-beautiful-dnd\";\n\nimport classNames from \"classnames\";\n\nfunction SelectedField({\n  style,\n  displayName,\n  index,\n  draggableId,\n  dragIndex,\n  animated\n}) {\n  return (\n    <Draggable draggableId={draggableId} type=\"Field\" index={index}>\n      {\n        (provided, snapshot) => {\n        return (\n          <Field\n            style={style}\n            displayName={displayName}\n            dragIndex={dragIndex}\n            provided={provided}\n            animated={animated}\n          />\n        );\n      }}\n    </Draggable>\n  );\n}\n\nfunction Field({ style, displayName, dragIndex, animated, provided }) {\n  return (\n    <div>\n      <div\n        className={style.draggable}\n        ref={provided.innerRef}\n        {...provided.draggableProps}\n        {...provided.dragHandleProps}\n      >\n        <div className={style.field}>\n          <span\n            className={classNames({\n              [style.groupBy]: true,\n              [style.animated]: animated\n            })}\n          >\n            {dragIndex === 0 ? \"Group by\" : \"Then by\"}\n          </span>\n          <span className={style.fieldName}>{displayName}</span>\n        </div>\n      </div>\n\n      {provided.placeholder}\n    </div>\n  );\n}\n\nSelectedField.propTypes = {\n  style: PropTypes.shape({\n    draggable: PropTypes.string.isRequired,\n    field: PropTypes.string.isRequired,\n    groupBy: PropTypes.string.isRequired,\n    fieldName: PropTypes.string.isRequired\n  }),\n  displayName: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  draggableId: PropTypes.string.isRequired,\n  dragIndex: PropTypes.number.isRequired,\n  animated: PropTypes.bool.isRequired\n};\n\nexport default SelectedField;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { findIndex, eqBy, differenceWith, isEmpty, isNil, path } from \"ramda\";\n\nimport { Droppable } from \"react-beautiful-dnd\";\n\nimport SelectedField from \"./SelectedField\";\n\nclass SelectedFieldList extends React.Component {\n  state = {\n    lastFields: [],\n    toAnimate: null\n  };\n\n  componentDidMount() {\n    this.setState({\n      lastFields: this.props.fields\n    });\n  }\n\n  static getDerivedStateFromProps(props, state){\n    const { getFieldId } = props;\n\n    // Find newly inserted item, if any\n    let toAnimate = differenceWith(\n      eqBy(getFieldId),\n      props.fields,\n      state.lastFields\n    )[0];\n\n    if (toAnimate) {\n      // Only animate item that are not inserted at the bottom using AffordanceDroppable\n      const newIndex = findIndex(eqBy(getFieldId, toAnimate), props.fields);\n      toAnimate = newIndex < state.lastFields.length ? toAnimate : null;\n    }\n\n    return {\n      lastFields: props.fields,\n      toAnimate: toAnimate\n    };\n  }\n\n  render() {\n    const { style, fields, getFieldId, droppableId, dragState } = this.props;\n\n    const draggingOver = isDraggingOver(droppableId, dragState);\n    return (\n      <div className={style.listContainer}>\n        <Droppable droppableId={droppableId} type=\"Field\">\n          {\n            (provided, snapshot) => {\n            return (\n              <div\n                ref={provided.innerRef}\n                {...provided.droppableProps}\n                className={style.droppable}\n              >\n                <List\n                  style={style}\n                  fields={fields}\n                  getFieldId={getFieldId}\n                  droppableId={droppableId}\n                  dragState={dragState}\n                  toAnimate={this.state.toAnimate}\n                />\n\n                {draggingOver &&\n                  dragState.destination.index !== fields.length &&\n                  provided.placeholder}\n              </div>\n            );\n          }}\n        </Droppable>\n      </div>\n    );\n  }\n}\n\nfunction List({\n  fields,\n  getFieldId,\n  style,\n  droppableId,\n  dragState,\n  toAnimate\n}) {\n  if (isEmpty(fields)) {\n    return null;\n  }\n  return fields.map((field, index) => {\n    const id = getFieldId(field);\n    const animated = toAnimate && getFieldId(field) === getFieldId(toAnimate);\n\n    return (\n      <SelectedField\n        style={style}\n        draggableId={id}\n        key={id}\n        displayName={field.displayName}\n        index={index}\n        dragIndex={dragIndex(droppableId, dragState, index)}\n        animated={animated || false}\n      />\n    );\n  });\n}\n\nconst isDraggingOver = (droppableId, dragState) => {\n  return (\n    !isNil(dragState) &&\n    path([\"destination\", \"droppableId\"], dragState) === droppableId\n  );\n};\n\n/**\n * Calculate the potential indices during drag based on the current dragState.\n *\n * This is used to update the groupBy label on the fly.\n */\nconst dragIndex = (droppableId, dragState, index) => {\n  if (!isDraggingOver(droppableId, dragState)) {\n    return index;\n  }\n\n  const { source, destination } = dragState;\n\n  const from = source.index;\n  const to = destination.index;\n\n  // When inserting, bump down everything below the new index\n  if (source.droppableId !== destination.droppableId) {\n    return index >= to ? index + 1 : index;\n  }\n\n  // For an item that is being dragged, the new index is the destination index.\n  if (index === from) {\n    return to;\n  }\n  // Items not between the source and destination indices are not affected\n  if (index < Math.min(from, to) || index > Math.max(from, to)) {\n    return index;\n  }\n\n  if (from < to) {\n    // If moving down, bump up everything in between\n    return index - 1;\n  } else {\n    // Otherwise, bump down everything in between\n    return index + 1;\n  }\n};\n\nSelectedFieldList.defaultProps = {\n  fields: []\n};\n\nSelectedFieldList.propTypes = {\n  fields: PropTypes.array,\n  droppableId: PropTypes.string.isRequired,\n  getFieldId: PropTypes.func.isRequired,\n\n  style: PropTypes.shape({\n    listContainer: PropTypes.string.isRequired,\n    draggable: PropTypes.string.isRequired,\n    field: PropTypes.string.isRequired,\n    groupBy: PropTypes.string.isRequired\n  })\n};\n\nexport default SelectedFieldList;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Draggable } from \"react-beautiful-dnd\";\n\nfunction AvailableField({ style, displayName, index, draggableId }) {\n  return (\n    <Draggable draggableId={draggableId} type=\"Field\" index={index}>\n      {(provided, snapshot) => {\n        return (\n          <span className={style.draggableContainer}>\n            <span\n              className={style.field}\n              ref={provided.innerRef}\n              {...provided.draggableProps}\n              {...provided.dragHandleProps}\n              style={{\n                ...provided.draggableProps.style,\n                // Disable animation of items moving out of the way when\n                // dragging. It implies the list is sortable, and it doesn't\n                // work well with multiline list anyway.\n                transform: snapshot.isDragging\n                  ? provided.draggableProps.style.transform\n                  : \"none\"\n              }}\n            >\n              {displayName}\n            </span>\n          </span>\n        );\n      }}\n    </Draggable>\n  );\n}\n\nconst StyleProps = PropTypes.shape({\n  draggableContainer: PropTypes.string.isRequired,\n  field: PropTypes.string.isRequired,\n});\n\nAvailableField.propTypes = {\n  style: StyleProps.isRequired,\n  displayName: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  draggableId: PropTypes.string.isRequired\n};\n\nexport default AvailableField;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport classNames from \"classnames\";\n\nimport { isEmpty, contains, map, sortBy, curry } from \"ramda\";\n\nimport { Droppable } from \"react-beautiful-dnd\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nimport AvailableField from \"./AvailableField\";\n\nfunction AvailableFieldList({\n  style,\n  fields,\n  values,\n  getFieldId,\n  droppableId,\n  dragState\n}) {\n  return (\n    <Droppable droppableId={droppableId} type=\"Field\">\n      {(provided, snapshot) => {\n        const dragForeign = isDraggingForeign(dragState, fields, getFieldId);\n\n        return (\n          <div\n            className={classNames(style.listContainer, {\n              [style.dragForeign]: dragForeign,\n              [style.isDraggingOver]: snapshot.isDraggingOver\n            })}\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n          >\n            {!isEmpty(fields) &&\n              sortBy(getCount(getFieldId, values), fields).map((field, index) => {\n                const id = getFieldId(field);\n                const count = values[id].length || 0;\n                return (\n                  <AvailableField\n                    style={style}\n                    key={id}\n                    draggableId={id}\n                    displayName={`${field.displayName} (${count})`}\n                    index={index}\n                    withPlaceholder={false}\n                  />\n                );\n              })}\n\n            {dragForeign && (\n              <div className={style.dragForeignContainer}>\n                <span>\n                  <FontAwesomeIcon icon={faTrashAlt} />\n                </span>\n              </div>\n            )}\n          </div>\n        );\n      }}\n    </Droppable>\n  );\n}\n\nconst getCount = curry((getFieldId, values, field) => {\n  return values[getFieldId(field)].length;\n});\n\nconst isDraggingForeign = (dragState, fields, getFieldId) => {\n  return (\n    dragState &&\n    dragState.draggableId &&\n    !contains(dragState.draggableId, map(getFieldId, fields))\n  );\n};\n\nAvailableFieldList.defaultProps = {\n  fields: []\n};\n\nconst StyleProps = PropTypes.shape({\n  listContainer: PropTypes.string.isRequired,\n  field: PropTypes.string.isRequired,\n  fieldName: PropTypes.string.isRequired\n});\n\nAvailableFieldList.propTypes = {\n  style: StyleProps.isRequired,\n  fields: PropTypes.array,\n  values: PropTypes.object,\n  getFieldId: PropTypes.func.isRequired,\n  droppableId: PropTypes.string.isRequired\n};\n\nexport default AvailableFieldList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport classNames from \"classnames\";\nimport { Droppable } from \"react-beautiful-dnd\";\n\n/**\n * Droppable component to use as a dummy drop target next to SelectedFieldList.\n * This droppable doesn't contain any draggable.\n *\n * Note: this cannot be used nested inside SelectedFieldList, because they need\n * to accept the same type, and react-beautiful-dnd doesn't allow that.\n */\nfunction DropTarget({ style, droppableId, isDropDisabled, fields }) {\n  return (\n    <div\n      className={classNames({\n        [style.listContainer]: true,\n        [style.isDropDisabled]: isDropDisabled\n        })}>\n      <div className={style.draggable}>\n        <div className={style.field}>\n          <span className={style.groupBy}>\n            { fields.length === 0 ? 'Group by' : 'Then by' }\n          </span>\n\n          <Droppable\n            isDropDisabled={ isDropDisabled }\n            droppableId={droppableId}\n            type=\"Field\">\n\n            {(provided, snapshot) => {\n              return (\n                <span\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  className={\n                    classNames({\n                      [style.dropTarget]: true,\n                      [style.isDraggingOver]: snapshot.isDraggingOver\n                    })}\n                >\n                    Drop attribute here\n                </span>\n              )\n            }}\n          </Droppable>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nDropTarget.propTypes = {\n  style: PropTypes.shape({\n    isDropDisabled: PropTypes.string.isRequired,\n    dropTarget: PropTypes.string.isRequired,\n    isDraggingOver: PropTypes.string.isRequired,\n\n    // The classes below should be identical to the styling of SelectedFieldList\n    // to make both layout the same.\n    listContainer: PropTypes.string.isRequired,\n    draggable: PropTypes.string.isRequired,\n    field: PropTypes.string.isRequired,\n    groupBy: PropTypes.string.isRequired,\n  }),\n\n  droppableId: PropTypes.string.isRequired,\n  isDropDisabled: PropTypes.bool.isRequired,\n  fields: PropTypes.array.isRequired\n}\n\n\nexport default DropTarget;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport { DragDropContext} from 'react-beautiful-dnd';\n\nimport {\n  compose,\n  differenceWith,\n  eqBy,\n  equals,\n  find,\n  findIndex,\n  identity,\n  insert,\n  isEmpty,\n  isNil,\n  path,\n  remove\n} from \"ramda\";\n\nimport { selectConfiguration, selectValues, getFieldId } from \"domain/dataset\";\nimport { setHierarchyConfig, selectControls, showNodes } from \"domain/controls\";\n\nimport SelectedFieldList from './SelectedFieldList';\nimport AvailableFieldList from './AvailableFieldList';\nimport DropTarget from './DropTarget';\n\nimport availableFieldListStyle from './AvailableFieldList.module.css';\nimport selectedFieldListStyle from './SelectedFieldList.module.css';\n\nconst SELECTED_FIELD_LIST_ID = 'SelectedFieldList';\nconst AVAILABLE_FIELD_LIST_ID = 'AvailableFieldList';\nconst DROP_TARGET_ID = 'DropTarget';\n\nclass HierarchySelector extends React.Component {\n\n  state = {\n    dragState: null\n  }\n\n  onDragStart = (dragStart) => {\n    this.setState({\n      dragState: dragStart\n    });\n  }\n\n  onDragUpdate = (dragUpdate) => {\n    this.setState({\n      dragState: dragUpdate\n    })\n  }\n\n  onDragEnd = (dropResult) => {\n    const { draggableId, destination } = dropResult;\n    this.setState({ dragState: null })\n\n    if (destination === null) {\n      return;\n    } else if (destination.droppableId === SELECTED_FIELD_LIST_ID) {\n      this.updateHierarchy(draggableId, destination.index)\n    } else if (destination.droppableId === (DROP_TARGET_ID)) {\n      this.updateHierarchy(draggableId, this.props.controls.hierarchyConfig.length);\n    } else {\n      this.removeField(draggableId);\n    }\n  }\n\n  updateHierarchy = (fieldId, newIndex) => {\n    const { fields } = this.props.configuration;\n    const { hierarchyConfig } = this.props.controls;\n\n    const index = findFieldIndex(hierarchyConfig, fieldId);\n    if (index === newIndex) { return; }\n\n    const hasId = (id) => (field) => getFieldId(field) === id;\n    const field = find(hasId(fieldId), fields)\n\n    const removeOld = isNil(index) ? identity : remove(index, 1);\n    const addNew = insert(newIndex, field);\n    const updatedHierarchy = compose(addNew, removeOld)(hierarchyConfig)\n\n    this.props.setHierarchyConfig(updatedHierarchy)\n  }\n\n  removeField = (fieldId) => {\n    const { hierarchyConfig } = this.props.controls;\n    const { setHierarchyConfig } = this.props;\n    const index = findFieldIndex(hierarchyConfig, fieldId);\n\n    if (index !== null) {\n      setHierarchyConfig(remove(index, 1, hierarchyConfig ))\n    }\n\n    if(this.props.controls.hierarchyConfig.length === 0 ){\n      this.props.showNodes(true);\n    }\n  }\n\n  render() {\n    if (this.props.configuration === null) {\n      return null;\n    }\n\n    const hierarchyConfig = this.props.controls.hierarchyConfig;\n\n    if (isEmpty(this.props.configuration.fields)) {\n      return null;\n    }\n\n    const availableFields = differenceWith(\n      eqBy(getFieldId),\n      this.props.configuration.fields.filter((f) => f.groupable),\n      hierarchyConfig\n    );\n\n    const values = this.props.values;\n\n    const dragState = this.state.dragState;\n\n    return (\n      <div>\n        <DragDropContext\n          onDragStart={ this.onDragStart }\n          onDragUpdate={ this.onDragUpdate }\n          onDragEnd={ this.onDragEnd }>\n\n          <div style={{ marginBottom: '2rem' }}>\n            <SelectedFieldList\n              style={ selectedFieldListStyle }\n              fields={ hierarchyConfig }\n              droppableId={ SELECTED_FIELD_LIST_ID }\n              getFieldId={ getFieldId }\n              dragState={ dragState }\n            />\n\n          <DropTarget\n            style={ selectedFieldListStyle }\n            isDropDisabled={ path(['source', 'droppableId'], dragState) === SELECTED_FIELD_LIST_ID }\n            droppableId= { DROP_TARGET_ID }\n            fields={ this.props.controls.hierarchyConfig }\n          />\n        </div>\n\n          <AvailableFieldList\n            style={ availableFieldListStyle }\n            fields={ availableFields }\n            values={ values }\n            droppableId={ AVAILABLE_FIELD_LIST_ID }\n            getFieldId={ getFieldId }\n            dragState={ this.state.dragState }\n          />\n\n        </DragDropContext>\n      </div>\n    );\n  }\n}\n\nHierarchySelector.propTypes = {\n  configuration: PropTypes.shape({\n    fields: PropTypes.array.isRequired\n  }),\n  controls: PropTypes.shape({\n    hierarchyConfig: PropTypes.array.isRequired\n  }),\n  showNodes: PropTypes.func.isRequired\n};\n\nconst findFieldIndex = (list, fieldId) => {\n  const matchId = compose(equals(fieldId), getFieldId)\n  const index = findIndex(matchId, list)\n  return index === -1 ? null : index;\n}\n\nconst mapStateToProps = (state) => ({\n  configuration: selectConfiguration(state),\n  values: selectValues(state),\n  controls: selectControls(state)\n});\n\nconst mapDispatchToProps = {\n  setHierarchyConfig,\n  showNodes\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HierarchySelector);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  sortBy,\n  curry,\n  compose,\n  join,\n  split,\n  find,\n  propEq,\n  prop,\n  isNil\n} from \"ramda\";\n\nfunction FieldSelect({\n  fields,\n  values,\n  getFieldId,\n  value,\n  onChange,\n  className,\n  name\n}) {\n  return (\n    <select\n      className={className}\n      name={name}\n      onChange={(evt) => onChange(stringToField(fields, evt.target.value))}\n      value={isNil(value) ? \"\" : fieldToString(value)}\n    >\n      <option value=\"\">&mdash;None&mdash;</option>\n      {sortBy(getCount(getFieldId, values), fields).map((field) => {\n        const key = getFieldId(field);\n        return (\n          <option key={key} value={key}>\n            {field.displayName} ({values[getFieldId(field)].length})\n          </option>\n        );\n      })}\n    </select>\n  );\n}\n\nconst getCount = curry((getFieldId, values, field) => {\n  return values[getFieldId(field)].length;\n});\n\nconst FieldShape = PropTypes.shape({\n  path: PropTypes.array.isRequired,\n  displayName: PropTypes.string.isRequired\n});\n\nFieldSelect.propTypes = {\n  fields: PropTypes.arrayOf(FieldShape).isRequired,\n  value: FieldShape,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  name: PropTypes.string\n};\n\nconst fieldToString = compose(join(\".\"), prop(\"path\"));\n\nconst stringToField = (fields, string) => {\n  const path = split(\".\", string);\n  return find(propEq(\"path\", path), fields);\n};\n\nexport default FieldSelect;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  showNodes,\n  useDarkTheme,\n  colorBy,\n  selectControls\n} from \"domain/controls\";\nimport { selectConfiguration, selectValues, getFieldId } from \"domain/dataset\";\n\nimport FieldSelect from \"./FieldSelect\";\n\nimport style from \"./MiscControls.module.css\";\n\nfunction MiscControls({\n  controls,\n  configuration,\n  values,\n  showNodes,\n  colorBy,\n  useDarkTheme\n}) {\n  const fields = configuration.fields.filter((f) => f.groupable);\n  return (\n    <div className={style.container}>\n      <div className={`${style.checkboxContainer} input-group`}>\n        <input\n          type=\"checkbox\"\n          id=\"show-node-check\"\n          checked={controls.shouldShowNodes}\n          onChange={(evt) => showNodes(evt.target.checked)}\n        />\n        <label htmlFor=\"show-node-check\" className=\"switch\">\n          Show nodes\n        </label>\n      </div>\n\n      <div className={`${style.checkboxContainer} input-group`}>\n        <input\n          type=\"checkbox\"\n          id=\"dark-theme-check\"\n          checked={controls.darkTheme}\n          onChange={(evt) => useDarkTheme(evt.target.checked)}\n        />\n        <label htmlFor=\"dark-theme-check\" className=\"switch\">\n          Use dark theme\n        </label>\n      </div>\n\n      <div className={`input-group ${style.colorBy}`}>\n        <label htmlFor=\"colorBy\">Color by</label>\n        <div className={style.fieldSelect}>\n          <FieldSelect\n            name=\"colorBy\"\n            onChange={colorBy}\n            fields={fields}\n            values={values}\n            getFieldId={getFieldId}\n            value={controls.colorBy}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    controls: selectControls(state),\n    configuration: selectConfiguration(state),\n    values: selectValues(state)\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    showNodes: (shouldShowNodes) => dispatch(showNodes(shouldShowNodes)),\n    useDarkTheme: (darkTheme) => dispatch(useDarkTheme(darkTheme)),\n    colorBy: (field) => dispatch(colorBy(field))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MiscControls);\n","import { is } from \"ramda\";\nimport { createAction } from \"redux-actions\";\nimport { of, empty } from \"rxjs\";\nimport { mergeMap, map, tap, catchError } from 'rxjs/operators';\nimport { QueryParseError } from 'lunr';\n\n\nimport { setSearchResults} from \"./index-dataset-epic\";\n\nconst searchDataset = createAction(\"SEARCH_DATASET\");\n\nconst searchDatasetEpic = (action$, store) => {\n  return action$\n    .ofType(searchDataset.toString()).pipe(\n      mergeMap(({ payload }) => {\n        return of(payload).pipe(\n            tap(performSearch)\n            ,map((payload) =>\n              setSearchResults({\n                queryString: payload.queryString,\n                results: payload.results || []\n              })\n            )\n            ,catchError((error) => {\n              if (is(QueryParseError, error)) {\n                alert(error.message);\n                return empty();\n              } else {\n                throw error;\n              }\n            })\n          );\n      })\n    );\n};\n\nconst performSearch = (data) => {\n  data.results = [];\n  var toFind = data.queryString || '';\n  const idx = data.searchIndex;\n  var results = [];\n  if(idx && toFind){\n    results = idx.search(toFind.toLowerCase());\n  }\n  data.dataset.forEach((el) => { el.isSearchResult = false; });\n  results.forEach((r) => {\n    data.dataset[r.ref].isSearchResult = true;\n    data.results.push(data.dataset[r.ref]);\n  });\n};\n\nexport default searchDatasetEpic;\n\nexport { searchDataset };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch,  faTimesCircle} from \"@fortawesome/free-solid-svg-icons\";\n\nimport { selectDataset, selectConfiguration } from \"domain/dataset\";\n\nimport { getSearchIndex, getSearchResults } from \"epics/index-dataset-epic\";\nimport { searchDataset } from \"epics/search-dataset-epic\";\n\nimport style from \"./SearchControls.module.css\";\n\nconst defaultState = {\n  queryString: '',\n  searchIndex: null,\n  results: [],\n  hasSearch: false\n}\n\nclass Search extends React.Component {\n\n  state = defaultState\n\n  handleSearch(){\n    this.setState({\n      hasSearch: this.state.queryString !== ''\n    });\n    var data = {\n      dataset: this.props.dataset,\n      configuration: this.props.configuration,\n      searchIndex: this.props.searchIndex,\n      queryString: this.state.queryString,\n      results: this.state.results\n    }\n    this.props.searchDataset(data);\n  }\n\n  clearSearch(){\n    this.setState(defaultState, function() {\n      this.handleSearch();\n    });\n  }\n\n  handleQueryStringChange = (e) =>{\n        this.setState({\n          queryString: e.target.value\n        });\n  }\n\n  handleKeyPress = (e) => {\n    if(e.key === 'Enter'){\n      this.handleSearch();\n    }\n  }\n\n  render() {\n    return (\n      <div className={style.searchContainer}>\n        <span className={ style.search }>\n          <input\n            type=\"search\"\n            id=\"search-string\"\n            placeholder=\"Search\"\n            value={this.state.queryString}\n            onChange={this.handleQueryStringChange}\n            onKeyPress={this.handleKeyPress}\n          />\n\n          <label htmlFor=\"search-string\" className=\"button\" onClick={() => this.handleSearch()}>\n            <FontAwesomeIcon icon={faSearch} />\n          </label>\n        </span>\n        { this.state.hasSearch &&\n          <span>\n            <label id=\"search-results\"> {this.props.results.length} Results found </label>\n            <label htmlFor=\"search-results\" className=\"button\" onClick={() => this.clearSearch()}>\n              <FontAwesomeIcon icon={faTimesCircle} />\n              </label>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = {\n  dataset: PropTypes.array,\n  configuration: PropTypes.object,\n  searchIndex: PropTypes.object,\n  queryString: PropTypes.string,\n  results: PropTypes.array,\n  searchDataset: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    dataset: selectDataset(state),\n    configuration: selectConfiguration(state),\n    searchIndex: getSearchIndex(state),\n    queryString: state.search.queryString,\n    results: getSearchResults(state)\n  };\n}\n\nconst mapDispatchToProps = {\n  searchDataset,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\n","import {\n  add,\n  addIndex,\n  aperture,\n  concat,\n  forEach,\n  map,\n  last,\n  prop,\n  reject,\n  reverse,\n  splitEvery,\n  reduce\n} from \"ramda\";\n\nimport { packEnclose } from \"d3-hierarchy\";\n\n/**\n * Pack circles into rows and columns.\n */\nconst packGrid = (circles) => {\n  const rows = toRows(circles);\n  placeRows(rows);\n\n  // Recenter everything over the origin\n  var enclosingCircle = packEnclose(circles);\n  forEach((c) => {\n    c.x -= enclosingCircle.x;\n    c.y -= enclosingCircle.y\n  }, circles);\n};\n\nconst eachWithIndex = addIndex(forEach);\n\n/**\n * Assign x and y coordinates to rows of circles\n */\nconst placeRows = (rows) => {\n  rows = middleOut(map(middleOut, rows));\n\n  const maxRadii = map(maxRadius, rows);\n  const ys = coordinatesForRadii(maxRadii);\n  const xs = map(coordinatesForRadii, map(map(prop('r')), rows));\n\n  return eachWithIndex(\n    (row, i) =>\n      eachWithIndex((node, j) => {\n        node.x = xs[i][j];\n        node.y = ys[i];\n      }, row),\n    rows\n  );\n};\n\nconst maxRadius = (row) => {\n  return Math.max(...row.map((c) => c.r));\n};\n\n// Calculate the coordinates for the given list of radii\n// such that circles of these radii sit on the same line without colliding.\n// The circles are distributed evenly over the origin.\nconst coordinatesForRadii = (radii) => {\n  const diameters = map((r) => r * 2, radii)\n  const size = reduce(add, 0, diameters);\n\n  const first = 0 - size / 2 + radii[0]; // Calculate the first coordinate\n\n  return reduce((coords, [lastRadius, currentRadius]) => {\n    return [...coords, last(coords) + lastRadius + currentRadius];\n  }, [first], aperture(2, radii))\n};\n\n\nconst pickEven = (list) => addIndex(reject)((_, i) => i % 2 === 0, list);\nconst pickOdd = (list) => addIndex(reject)((_, i) => i % 2 !== 0, list);\n\n/**\n/ Re-order items from the middle out, alternating in direction.\n/\n/ Example:\n/ middleOut([1, 2, 3, 4, 5]) //=> [4, 2, 1, 3, 5]\n*/\nconst middleOut = (rows) => {\n  const above = pickEven(rows);\n  const below = pickOdd(rows);\n  return concat(reverse(above), below);\n};\n\nconst toRows = (circles) => {\n  return splitEvery(Math.ceil(Math.sqrt(circles.length)), circles);\n};\n\nexport default packGrid;\n","import { packEnclose } from \"d3-hierarchy\";\nimport packGrid from \"./pack-grid\";\n\n/**\n * An adaptation of the circle packing algorithm to reserve spacing at the\n * bottom of each non-leaf circle for labeling.\n */\nconst packWithLabel = () => {\n  let options = {\n    // Radius funcion\n    // See d3.pack.radius\n    radius: null,\n\n    // Layout size\n    // See d3.pack.size\n    size: [1, 1],\n\n    // Padding constant/function\n    // See d3.pack.padding\n    padding: () => 0,\n\n    // A number in [0, 1) that determine the portion of the circle that is\n    // reserved for label.\n    //\n    // To ensure label display are consistent between siblings, all siblings\n    // circles use the label size of the largest circle.\n    labelRatio: 0.25,\n\n    // But we ensure smaller circle doesn't look like Ben Solo with its high\n    // waisted pant.\n    maxLabelRatio: 0.4,\n\n    // The packing method for packing siblings node.\n    // By default use the packGrid method. Can be set to use D3's packSiblings\n    // method instead.\n    packSiblings: packGrid\n  };\n\n  /**\n   * @param root - A D3 hierarchy object\n   * @return A `pack` object similar to `d3.pack` but with additional options (see above)\n   */\n  const pack = (root) => {\n    root.x = options.size[0] / 2;\n    root.y = options.size[1] / 2;\n    const { radius, size, labelRatio, maxLabelRatio, packSiblings } = options;\n    const padding =\n      typeof options.padding === \"function\" ? options.padding : () => options.padding;\n\n    if (radius) {\n      root\n        .eachBefore(radiusLeaf(radius))\n        .eachAfter(packChildren(packSiblings, labelRatio, maxLabelRatio, padding, 0.5))\n        .eachBefore(translateChild(1));\n    } else {\n      // If radius is not specified, set each leaf node's radius based on its\n      // value, then resize the entire layout to fit options.size\n      root\n        .eachBefore(radiusLeaf((d) => Math.sqrt(d.value)))\n        .eachAfter(packChildren(packSiblings, labelRatio, maxLabelRatio, () => 0, 1))\n        .eachAfter(\n          packChildren(\n            packSiblings,\n            labelRatio,\n            maxLabelRatio,\n            padding,\n            root.r / Math.min(...size)\n          )\n        )\n        .eachBefore(translateChild(Math.min(...size) / (2 * root.r)));\n    }\n    return root;\n  };\n\n  /**\n   * Create an option method for each of the option above.\n   * Calling the method without arguments returns the current value.\n   * Calling the method with argument sets the option.\n   *\n   * Example:\n   * var pack = packWithLabel(root)\n   *              .radius(() => 20)\n   * pack.radius() //=> () => 20.\n   */\n  Object.keys(options).forEach((key) => {\n    pack[key] = (value) => {\n      if (arguments.length === 0) {\n        return options[key];\n      }\n      options[key] = value;\n      return pack;\n    };\n  });\n\n  return pack;\n};\n\nconst radiusLeaf = (radius) => {\n  return (node) => {\n    if (!node.children) {\n      node.r = Math.max(radius(node), 0);\n    }\n  };\n};\n\nconst getLabelSize = (labelRatio) => (node) => {\n  return 2 * node.r * labelRatio / (1 - labelRatio);\n};\n\n/**\n * Pack children of a node, then set the node's radius to enclose all the children\n */\nconst packChildren = (packSiblings, labelRatio, maxLabelRatio, padding, k) => (node) => {\n  if (!node.children) {\n    return;\n  }\n\n  const children = node.children;\n\n  const nonleafChildren = children.filter((child) => child.height > 0);\n\n  // Calculate the label size of the largest non-leaf children\n  // and expand their radii accordingly to make space for label.\n  if (nonleafChildren.length > 0) {\n    const labelSize = Math.max(...nonleafChildren.map(getLabelSize(labelRatio)))\n\n    nonleafChildren.forEach((node) => {\n      node.labelSize = Math.min(labelSize, getLabelSize(maxLabelRatio)(node));\n      node.r += node.labelSize / 2;\n    });\n  }\n\n  const paddingSize = padding(node) * k || 0;\n\n  // Padding is implemented by adding it to the children's radii, pack,\n  // then returning the radii to their original value.\n  if (paddingSize) {\n    children.forEach((child) => (child.r += paddingSize));\n  }\n\n  packSiblings(children);\n  const enclosingRadius = packEnclose(children).r;\n\n  if (paddingSize) {\n    children.forEach((child) => (child.r -= paddingSize));\n  }\n\n  node.r = enclosingRadius + paddingSize;\n};\n\n// Set the the node's children's positions to be inside the node and above the\n// space reserved for labeling.\nconst translateChild = (k) => (node) => {\n  const parent = node.parent;\n  node.r *= k;\n\n  if (node.labelSize) {\n    node.labelSize *= k;\n    node.labelY = node.r - node.labelSize / 2;\n    node.labelWidth = 2 * Math.sqrt(node.r ** 2 - node.labelY ** 2);\n  }\n\n  if (parent) {\n    node.x = parent.x + k * node.x;\n    node.y = parent.y + k * node.y;\n    if (parent.labelSize) {\n      node.y -= parent.labelSize / 2;\n    }\n  }\n};\n\nexport default packWithLabel;\n","import { chain, head, tail, map, reduce, path, isNil } from \"ramda\";\nimport { nest } from \"d3-collection\";\nimport { hierarchy as d3Hierarchy } from \"d3-hierarchy\";\n\n/**\n * Convert an array of nodes into a D3 hierarchy\n *\n * @param [array] data - an array of data\n * @hierarchy [array] - an array of objects in the shape of\n * {\n *   displayName: string,\n *   path: array[string]\n * }\n */\n\nconst toHierarchy = (data, hierarchyConfig) => {\n  const nesting = nestHierarchy(hierarchyConfig).entries(data);\n  const result = entriesToHierarchy(\"root\", null, hierarchyConfig, nesting);\n  return d3Hierarchy(result);\n};\n\n/**\n * Create the D3 nest function that will nest data given the hierarchyConfig.\n */\nconst nestHierarchy = (hierarchyConfig) => {\n  return reduce(\n    (nest, field) => {\n      return nest.key((d) => path(field.path, d));\n    },\n    nest(),\n    hierarchyConfig\n  );\n};\n\nconst countSearchResults = (children) => {\n  if(isNil(children)){\n    return 0;\n  }\n\n  var result = 0;\n\n  for(var c in children){\n    result += (children[c].searchResultCount || 0) + (children[c].isSearchResult || 0) +\n              (\n                !isNil(children[c].values)\n                  ? countSearchResults(children[c].values) : 0\n              );\n  }\n\n  return result;\n};\n\n/**\n * Convert nest entries into the format accepted by d3.hierarchy\n */\nconst entriesToHierarchy = (fieldValue, field, hierarchyConfig, entries) => {\n  if (fieldValue === 'Unknown') {\n    return {\n      fieldValue,\n      field,\n      children: chain(getLeaves, entries),\n      searchResultCount: countSearchResults(entries)\n    }\n  }\n\n  return {\n    fieldValue,\n    field,\n    children: map((entry) => {\n      if (entry.values) {\n        return entriesToHierarchy(\n          entry.key,\n          head(hierarchyConfig),\n          tail(hierarchyConfig),\n          entry.values\n        );\n      } else {\n        return entry;\n      }\n    }, entries),\n    searchResultCount: countSearchResults(entries)\n  };\n};\n\nconst getLeaves = (entry) => {\n  if (entry.values) {\n    return chain(getLeaves, entry.values)\n  } else {\n    return [entry]\n  }\n}\n\nexport default toHierarchy;\n","\n/**\n * Return a string that can be used to check if two data are the same.\n*/\nconst datumKey = (datum) => {\n  if (datum.depth === 0) {\n    return 'root';\n  } else if (datum.height > 0) {\n    return [\n      datumKey(datum.parent),\n      datum.data.field.path.join(\".\"),\n      datum.data.fieldValue\n    ].join(\".\");\n  } else {\n    return datum.data.uid;\n  }\n};\n\nexport default datumKey;\n","import { path } from \"d3-path\";\nimport datumKey from \"./datum-key\";\n\nconst appendCircles = ({ nodeRoot, labelRoot, packedData, showNodes, hasSearch }) => {\n  const isInternal = (d) => d.depth > 0 && d.height > 0;\n\n  const data = packedData.descendants();\n\n  const nodes = nodeRoot\n    .selectAll(`g.${className(\"node\")}`)\n    .data(data, datumKey);\n\n  nodes.exit().remove();\n  //console.log(nodes);\n  const nodesEnter = nodes.enter().append(\"g\").classed(className(\"node\"), true);\n  nodesEnter\n    .merge(nodes)\n    .attr('data-key', datumKey)\n    .classed(className(\"rootNode\"), (d) => d.depth === 0)\n    .classed(className(\"groupingNode\"), (d) => d.depth > 0 && d.height > 0)\n    .classed(className(\"containsSearchResult\"), (d) => hasSearch && d.data.searchResultCount > 0 && d.depth > 0 && d.height > 0)\n    .classed(className(\"containsNoSearchResult\"), (d) => hasSearch && d.data.searchResultCount === 0 && d.depth > 0 && d.height > 0)\n    .classed(className(\"searchResult\"), (d) => hasSearch && d.data.isSearchResult && d.depth > 0 && d.height === 0)\n    .classed(className(\"searchExcluded\"), (d) => hasSearch && !d.data.isSearchResult && d.depth > 0 && d.height === 0)\n    .classed(className(\"leafNode\"), (d) => d.height === 0)\n    .attr(\"transform\", (d) => `translate(${[d.x, d.y].join(\",\")})`)\n    .attr(\"display\", (d) => !showNodes && d.height === 0 ? 'none' : null)\n    .order();\n\n  const circles = nodes.select(\"circle\").merge(nodesEnter.append(\"circle\"));\n\n  circles.attr(\"r\", (d) => d.r);\n\n  const labelShapes = nodes.select(\"path\").merge(nodesEnter.append(\"path\"));\n\n  labelShapes\n    .filter((d) => d.labelSize)\n    .attr(\"class\", className(\"labelShape\"))\n    .attr(\"d\", getLabelShape);\n\n  const labels = labelRoot\n    .selectAll(`text.${className(\"label\")}`)\n    .data(packedData.descendants().filter(isInternal));\n\n  labels.exit().remove();\n\n  const labelsEnter = labels\n    .enter()\n    .append(\"text\")\n    .classed(className(\"label\"), true);\n\n  const countLabels = labelRoot\n    .selectAll(`text.${className(\"countLabel\")}`)\n    .data(packedData.descendants().filter((d) => d.height === 1))\n\n  countLabels.exit().remove();\n\n  const countLabelsEnter = countLabels\n    .enter()\n    .append(\"text\")\n    .classed(className(\"countLabel\"), true);\n\n  countLabels\n    .merge(countLabelsEnter).text((d) => d.value )\n    .style(\"display\", showNodes ? 'none' : 'block')\n\n  return [\n    nodes.merge(nodesEnter),\n    labels.merge(labelsEnter),\n    countLabels.merge(countLabelsEnter)\n  ];\n};\n\n/**\n * Calculate the d attribute of a path element representing the shape of the\n * label area (the partial circles at the bottom of the grouping nodes)\n */\nconst getLabelShape = (d) => {\n  const top = d.r - d.labelSize;\n  const radius = d.r;\n\n  const startAngle = Math.PI / 2 + Math.acos(top / radius);\n  const endAngle = Math.PI / 2 - Math.acos(top / radius);\n\n  const shape = path();\n  shape.arc(0, 0, radius, startAngle, endAngle, true);\n  shape.closePath();\n  return shape.toString();\n\n}\n\nconst className = (name) => `viz-${name}`;\n\nexport default appendCircles;\n","import { memoizeWith } from \"ramda\";\n\nconst context = document.createElement(\"canvas\").getContext(\"2d\");\n\nconst memoizeKey = (font, text) => [font, text].join(\" \");\n\n/**\n * Measure width and height of text using canvas.\n * return an array [width, height]\n */\nconst measureText = memoizeWith(memoizeKey, (font, text) => {\n  context.font = font;\n\n  return [\n    Math.floor(context.measureText(text).width),\n    // Chrome doesn't support advanced text metrics yet, so\n    // we'll use the width of the letter M as an approximation of text height.\n    // https://youtu.be/Ps6GBLlSGLs?t=22m51s\n    Math.floor(context.measureText(\"M\").width)\n  ];\n});\n\nconst fitText = (font, text, width) => {\n  var original = text;\n  // var fontSpec = getFontSpec(textElement);\n  // var fontSpec = '12px sans-serif';\n  var textLength = measureText(font, text)[0];\n\n  while (textLength >= width && text.length > 0) {\n    text = text.slice(0, text.length - 1);\n    textLength = measureText(font, text + \"\")[0];\n  }\n\n  return text + (text.length < original.length ? String.fromCharCode(8230) : \"\");\n}\n\n\n\n/**\n * Get CSS font from DOM node\n * Return the entire string, e.g. \"12px sans-serif\"\n */\nconst getFont = (domElement) => {\n  const style = getComputedStyle(domElement);\n  const family = style.getPropertyValue('font-family')\n  const size = style.getPropertyValue('font-size')\n\n  return  size + \" \" + family;\n}\n\nexport { measureText, fitText, getFont };\n","import { zoom, zoomTransform } from \"d3-zoom\";\nimport { event as d3Event } from \"d3-selection\";\nimport { zoomIdentity } from \"d3-zoom\";\nimport { measureText, fitText, getFont } from \"./text-utils\";\n\nconst setupZoom = ({\n  zoomRoot,\n  transformRoot,\n  nodes,\n  labels,\n  countLabels,\n  showNodes,\n  width,\n  height,\n  packedData\n}) => {\n\n  const state = {\n    zoomTo: null,\n    zoomToTransform: null,\n    // Find the current zoom transform if any\n    transform: zoomTransform(zoomRoot.node())\n  };\n\n  const zoomBehavior = zoom();\n\n  zoomBehavior.on(\"zoom\", () => {\n    const event = d3Event;\n    state.transform = event.transform;\n    zoomToTransform(event.transform)\n  });\n\n  zoomRoot.call(zoomBehavior);\n\n  // Amount of space to leave around a node when zoomed into that node\n  // (as a fraction of the node diameter)\n  const viewPadding = 0.25;\n\n  const { r: rootR, x: rootX, y: rootY } = packedData;\n\n  const scaleExtent = [\n    Math.min(width, height) / (rootR * 2),\n    Math.min(width, height) / (packedData.leaves()[0].r * 2 * (1 + viewPadding))\n  ];\n\n  const translateExtent = [\n    [\n      rootX - width / 2 / scaleExtent[0] * 2,\n      rootY - height / 2 / scaleExtent[0] * 2\n    ],\n    [\n      rootX + width / 2 / scaleExtent[0] * 2,\n      rootY + height / 2 / scaleExtent[0] * 2\n    ]\n  ];\n\n  zoomBehavior.scaleExtent(scaleExtent).translateExtent(translateExtent);\n\n  // Assume everything is hidden by default.\n  //\n  // Note:\n  // This could have been done using inline style.\n  // The odd thing is, when using inline style, apparently each node's style is\n  // recalculated in every frame during zooming regardless of whether or not\n  // the inline style was changed.\n  //\n  // Using a class avoided this issue.\n  nodes.classed('viz-zoomMinutia', true);\n\n  const [labelFont, labelHeight] = getLabelStyle(labels);\n  const [countLabelFont, countLabelHeight] = getLabelStyle(countLabels);\n\n  function zoomToTransform(transform) {\n    transformRoot\n      .style(\"transform\", `translate(${ Math.floor(transform.x) }px, ${ Math.floor(transform.y) }px) scale(${ transform.k })`);\n\n    const bound = viewBound(width, height, transform);\n\n    const nodesInView = nodes.filter((d) => boundOverlap(bound, nodeBound(d)));\n    const labelsInView = labels.filter((d) => boundOverlap(bound, nodeBound(d)));\n    const labelsNotInView = labels.filter((d) => !boundOverlap(bound, nodeBound(d)));\n    const countLabelsInView = countLabels.filter((d) => boundOverlap(bound, nodeBound(d)));\n    const hiddenCountLabels = countLabels.filter((d) => !boundOverlap(bound, nodeBound(d)));\n\n    nodesInView\n      .call(hideSmall, transform)\n\n    labelsInView\n      .style('visibility', 'visible')\n      .call(fitLabels, transform, labelFont, labelHeight, bound);\n\n    labelsNotInView.style('visibility', 'hidden');\n\n    countLabelsInView\n      .style('visibility', 'visible')\n      .call(fitCounts, transform, countLabelFont, countLabelHeight, bound);\n\n    hiddenCountLabels.style(\"visibility\", \"hidden\");\n  };\n\n  function zoomTo(datum, animate = true) {\n    const size = datum.r * 2 * (1 + viewPadding);\n    const k = Math.min(width, height) / size;\n    const transform = zoomIdentity\n      .scale(k)\n      .translate(\n          - datum.x + width / 2 / k,\n          - datum.y + height / 2 / k,\n      );\n\n    zoomBehavior.transform(\n      !animate ? zoomRoot : zoomRoot.transition().duration(1000),\n      transform\n    );\n  }\n\n  if (state.transform) {\n    zoomToTransform(state.transform);\n  }\n\n  state.zoomTo = zoomTo;\n  state.zoomToTransform = zoomToTransform;\n\n  return state;\n};\n\nconst hideSmall = (nodes, transform) => {\n  const tooSmall = (d) => d.r * transform.k < 1;\n\n  nodes\n    .filter(\":not(.viz-zoomMinutia)\")\n    .filter((d) => tooSmall(d))\n    .classed(\"viz-zoomMinutia\", true);\n\n  nodes\n    .filter(\".viz-zoomMinutia\")\n    .filter((d) => !tooSmall(d))\n    .classed(\"viz-zoomMinutia\", false)\n};\n\nconst fitCounts = (countLabels, transform, font, countHeight, viewBound) => {\n  const fitVertically = (d) => (d.r * 2 - d.labelSize) * transform.k * 0.66 >= countHeight;\n\n  countLabels\n    .style(\"visibility\", (d) => fitVertically(d) ? \"visible\" : \"hidden\")\n    .filter(fitVertically)\n    .text((datum) => {\n      const labelText = datum.value;\n      const maxWidth = Math.floor(datum.r * 2 * 0.75 * transform.k);\n      return fitText(font, labelText, maxWidth);\n    })\n    .attr(\"transform\", (d) => {\n      return zoomIdentity\n        .translate(transform.applyX(d.x), transform.applyY(d.y - (d.labelSize / 2)))\n    });\n};\n\nconst fitLabels = (labels, transform, labelFont, labelHeight, viewBound) => {\n  const fitVertically = (d) => d.labelSize * transform.k >= labelHeight;\n\n  labels\n    .style(\"visibility\", (d) => (fitVertically(d) ? \"visible\" : \"hidden\"))\n    .filter(fitVertically)\n    .text((datum) => {\n      const labelText = `${datum.data.fieldValue} (${datum.value})`;\n      // We'll try to fit more text on the label at the expense\n      // of possibly having labels extend outside of their area.\n      const maxWidth = Math.floor(datum.labelSize * transform.k * 1.2);\n      return fitText(labelFont, labelText, maxWidth);\n    })\n    .attr(\"transform\", (d) => {\n      return zoomIdentity\n        .translate(transform.applyX(d.x), transform.applyY(d.y + d.labelY))\n    })\n};\n\n/**\n * The bound of the view given the original width, height, and transform\n */\nconst viewBound = (width, height, transform) => {\n  var size = Math.min(width, height);\n  var boundWidth = size * Math.max(width / height, 1);\n  var boundHeight = size * Math.max(height / width, 1);\n\n  var bound = [\n    -transform.x / transform.k,\n    -transform.y / transform.k,\n    (-transform.x + boundWidth) / transform.k,\n    (-transform.y + boundHeight) / transform.k\n  ];\n  return bound;\n};\n\nconst nodeBound = (datum) => [\n  datum.x - datum.r,\n  datum.y - datum.r,\n  datum.x + datum.r,\n  datum.y + datum.r\n];\n\nconst boundOverlap = (bound0, bound1) => {\n  return (\n    bound0[0] <= bound1[2] &&\n    bound0[2] >= bound1[0] &&\n    bound0[1] <= bound1[3] &&\n    bound0[3] >= bound1[1]\n  );\n};\n\nconst getLabelStyle = (labels) => {\n  let font = null,\n    height = null;\n  if (labels.size() > 0) {\n    font = getFont(labels.nodes()[0]);\n    height = measureText(font, \"M\")[1];\n  }\n\n  return [font, height];\n};\n\nexport default setupZoom;\n","import { map, join, path } from \"ramda\";\nimport { select, event as d3Event } from \"d3-selection\";\n\nconst setupTooltip = ({ nodeRoot, tooltip, fields }) => {\n  tooltip\n    .style(\"display\", \"block\")\n    .style(\"position\", \"absolute\")\n    .style(\"transform\", null)\n    .style(\"top\", \"0px\")\n    .style(\"left\", \"0px\");\n\n  const boundingRect = tooltip.node().getBoundingClientRect();\n\n  const offsetLeft = -boundingRect.left + 5;\n  const offsetTop = -boundingRect.top + 5;\n\n  // Measurements need to be taken before hiding the tooltip, otherwise they are\n  // not accurate.\n  tooltip.style(\"display\", \"none\")\n\n  nodeRoot.on(\"mousemove\", () => {\n    const event = d3Event;\n    showTooltip(event, fields, offsetTop, offsetLeft, tooltip);\n\n  });\n};\n\nconst showTooltip = (event, fields, offsetTop, offsetLeft, tooltip) => {\n  const target = select(event.target);\n  const datum = target.datum();\n  const text = content(datum, fields);\n  if (text) {\n    tooltip.node().innerHTML = text;\n    tooltip\n      .style(\"display\", \"block\")\n      .style(\"transform\", `translate3d(${ event.x + offsetLeft + 1 }px, ${ event.y + offsetTop + 1 }px, 0)`)\n  } else {\n    tooltip.style(\"display\", \"none\");\n  }\n  //tooltip.classed(\"searchResult\", datum.data.isSearchResult);\n};\n\nconst content = (datum, fields) => {\n  if (datum.depth > 0 && datum.height > 0) {\n    let cont = `${ datum.data.fieldValue } (${datum.value})`;\n    if(datum.data.searchResultCount > 0){\n      cont += `<br/><span>${datum.data.searchResultCount} search results</span>`\n    }\n    return cont;\n  } else if (datum.height === 0) {\n    const pairs = map(\n      (field) => [`<strong>${ field.displayName }</strong>`, path(field.path, datum.data)],\n      fields\n    );\n    return map(join(\": \"), pairs).join(\"<br />\");\n  } else {\n    return null;\n  }\n};\n\nexport default setupTooltip;\n","import { times, concat } from \"ramda\";\nimport { scaleLinear, scalePow } from 'd3-scale';\nimport { hcl } from \"d3-color\";\n\nconst colorScheme = [\n  \"#a6cee3\",\n  \"#3366cc\",\n  \"#b2df8a\",\n  \"#33a02c\",\n  \"#fb9a99\",\n  \"#996699\",\n  \"#fdbf6f\",\n  \"#ff7f00\",\n  \"#cc99ff\",\n  \"#6a3d9a\",\n  \"#ffff99\",\n  \"#b15928\",\n  \"#ffcc99\",\n  \"#333399\"\n];\n\nconst extendColorScheme = (colorScheme, count) => {\n  const extraLayers = Math.floor(count / colorScheme.length);\n\n  if (extraLayers === 0) {\n    return colorScheme;\n  }\n\n  const extraColors = times((i) => {\n    const currentLayer = (i + colorScheme.length) / colorScheme.length;\n\n    const previous = hcl(colorScheme[i % colorScheme.length])\n    const neighbor = hcl(colorScheme[(i + 1) % colorScheme.length])\n\n    const hScale = scaleLinear()\n      .domain([0, extraLayers])\n      .range([previous.h, neighbor.h]);\n\n    const cScale = scalePow()\n      .exponent(5)\n      .domain([0, extraLayers])\n      .range([previous.c, 100]);\n\n    const lScale = scalePow()\n      .exponent(2)\n      .domain([0, extraLayers])\n      .range([previous.l, previous.l / 2]);\n\n    const h = hScale(currentLayer)\n    const c = cScale(currentLayer);\n    const l = lScale(currentLayer);\n\n    const nextColor = hcl(h, c, l);\n    return nextColor.toString();\n  }, count - colorScheme.length);\n\n  return concat(colorScheme, extraColors)\n}\n\nexport { colorScheme, extendColorScheme };\n","import { selectAll, select, event as d3Event } from 'd3-selection';\n\nimport {\n  contains,\n  either,\n  equals,\n  fromPairs,\n  toPairs,\n  identity,\n  map,\n  path,\n  pipe,\n  sortBy,\n  uniq,\n  zip\n} from \"ramda\";\n\nimport { colorScheme, extendColorScheme } from './color-scheme';\n\nfunction setupLegend({ legend, data, hierarchyConfig, coloredField, legendConfig }) {\n  if (!coloredField) {\n    legend.style(\"display\", \"none\");\n\n    const state = { nodes: [] }\n\n    function update({ nodes }) {\n      state.nodes = nodes;\n      if (!coloredField) {\n        nodes.select('circle').attr('class', null);\n        nodes.classed('viz-coloredNode', false);\n        return;\n      }\n    }\n\n    return { update };\n  } else {\n    legend.style(\"display\", null);\n  }\n\n  const getValue = either(path(coloredField.path), path([\"fieldValue\"]));\n\n  // If coloring groupings, don't color devices with the same value\n  const isColoringGroup = contains(coloredField, hierarchyConfig);\n\n  const values = pipe(\n    map(getValue),\n    uniq,\n    sortBy(identity)\n  )(data);\n\n  const scheme = extendColorScheme(colorScheme, values.length);\n\n  const configs = scheme.map((color, index) => ({\n    color,\n    disabled: false,\n    className: `legend-color-${index}`\n  }));\n\n  const coloring = zip(values, configs);\n  const colorMap = fromPairs(coloring);\n\n  createStylesheet(coloring);\n\n  const state = { nodes: [] }\n\n  function update({ nodes }) {\n    state.nodes = nodes;\n    if (!coloredField) {\n      nodes.select('circle').attr('class', null);\n      nodes.classed('viz-coloredNode', false);\n      return;\n    }\n\n    colorNodes({ nodes, colorMap, getValue, coloredField, isColoringGroup });\n    updateLegend({ legend, colorMap, toggleValue })\n  }\n\n  function toggleValue(value) {\n    colorMap[value].disabled = !colorMap[value].disabled;\n    update({ nodes: state.nodes });\n  }\n\n  return { update };\n}\n\nconst updateLegend = ({ legend, colorMap, toggleValue }) => {\n  const items = legend\n    .selectAll(\"p.viz-legendItem\")\n    .data(toPairs(colorMap), ([value]) => value );\n\n  items.exit().remove();\n\n  const itemsEnter = items.enter().append(\"p\").classed(\"viz-legendItem\", true)\n  itemsEnter.append(\"span\").classed(\"viz-legendColor\", true);\n  itemsEnter.append(\"span\").classed(\"viz-legendLabel\", true);\n\n  items.merge(itemsEnter)\n    .classed(\"viz-legendDisabled\", (d) => d[1].disabled);\n\n  items.merge(itemsEnter)\n    .select(\".viz-legendColor\")\n    .style(\"background-color\", ([value, { color }]) => color);\n\n  items.merge(itemsEnter)\n    .select(\".viz-legendLabel\")\n    .attr('title', ([value]) => value)\n    .text(([value]) => value);\n\n  legend.on('click.toggle', () => {\n    const datum = select(d3Event.target).datum();\n    if (datum) {\n      toggleValue(datum[0]);\n    }\n  })\n}\n\n/**\n * Having inline style trigger an expensive \"recalculate style\" in every frame\n * during zooming (even if the style attribute is empty!).\n *\n * We work around this by creating a style element that contains a class for\n * each item in the legend and assign those classes to each circle.\n*/\nconst createStylesheet = (coloring) => {\n  const style = selectAll('style#coloring').data([coloring]);\n  const styleEnter = style.enter().append('style').attr('id', 'coloring');\n\n  const html = coloring.map(([ value, { color, className } ], index) => {\n    return `\n      .viz-node circle.${className} {\n        fill: ${color} !important\n      }\n    `\n  }).join(\"\\n\");\n\n  style.merge(styleEnter)\n    .html(html)\n}\n\nconst colorNodes = ({ nodes, colorMap, getValue, coloredField, isColoringGroup }) => {\n\n  nodes\n    .filter((d) => d.height === 0)\n    .select(\"circle\")\n    .attr('class', (d) => {\n      const { disabled, className } = colorMap[getValue(d.data)] || {};\n      return !isColoringGroup && !disabled && className ? className : null\n    });\n\n  nodes\n    .filter((d) => d.height > 0)\n    .classed(\"viz-coloredNode\", (d) => {\n      const { disabled } = colorMap[getValue(d.data)] || {};\n      return !disabled &&\n        equals(d.data.field, coloredField) \n    })\n    .select(\"circle\")\n    .attr('class', (d) => {\n      const { disabled, className } = colorMap[getValue(d.data)] || {};\n      return isColoringGroup\n        && equals(d.data.field, coloredField)\n        && !disabled\n        && className;\n    });\n}\n\nexport default setupLegend;\n","import { select, event as d3Event } from \"d3-selection\";\n\nimport { ResizeSensor } from \"css-element-queries\";\nimport debounce from \"lodash.debounce\";\n\nimport {\n  allPass,\n  eqProps,\n  eqBy,\n  find,\n  map,\n  reduce,\n  reduceWhile,\n  reduced,\n  reverse,\n  tail\n} from \"ramda\";\n\nimport packWithLabel from \"./d3-viz/pack-with-label\";\nimport toHierarchy from \"./d3-viz/to-hierarchy\";\nimport appendCircles from \"./d3-viz/append-circles\";\nimport setupZoom from \"./d3-viz/setup-zoom\";\nimport setupTooltip from \"./d3-viz/setup-tooltip\";\nimport setupLegend from \"./d3-viz/setup-legend\";\nimport datumKey from \"./d3-viz/datum-key\";\n\nfunction d3Viz(rootNode) {\n  const root = select(rootNode);\n  // const width = rootNode.clientWidth;\n  // const height = rootNode.clientHeight;\n\n  /**\n   * Stationary div that receive mouse events for zooming.\n   */\n  const zoomRoot = root\n    .append(\"div\")\n    .style(\"position\", \"relative\")\n    .style(\"width\", \"100%\")\n    .style(\"height\", \"100%\");\n\n  root.style(\"position\", \"relative\");\n\n  /**\n   * The container that is scaled and transformed.\n   *\n   * Use a div with CSS 3D transform to get hardware acceleration.\n   * SVG transform are not hardware accelerated.\n   */\n  const transformRoot = zoomRoot\n    .append(\"div\")\n    .attr(\"data-node\", \"transformRoot\")\n    .style(\"position\", \"absolute\")\n    .style(\"top\", 0)\n    .style(\"left\", 0)\n    .style(\"width\", \"100%\")\n    .style(\"height\", \"100%\")\n    .style(\"transform-origin\", \"top left\");\n\n  /**\n   * Label are placed in a separate element so that they are not scaled\n   * together with the circles.\n   */\n  const labelRoot = zoomRoot\n    .append(\"svg\")\n    .style(\"position\", \"absolute\")\n    .style(\"pointer-events\", \"none\") // Let the underlying circles get mouse events.\n    .style(\"top\", 0)\n    .style(\"left\", 0)\n    .style(\"width\", \"100%\")\n    .style(\"height\", \"100%\");\n\n  const svg = transformRoot.append(\"svg\").style(\"overflow\", \"visible\");\n\n  const tooltip = root.append(\"div\").classed(\"viz-tooltip\", true);\n  const legend = root.append(\"div\").classed(\"viz-legend\", true);\n\n  const nodeRoot = svg.append(\"g\");\n\n  // State\n  let props = {\n    hierarchyConfig: null,\n    data: null,\n    fields: null,\n    width: rootNode.clientWidth,\n    height: rootNode.clientHeight,\n    showNodes: true,\n    coloredField: null,\n    queryString: ''\n  };\n\n  const state = {\n    packedData: null,\n    nodes: null,\n    labels: null,\n    countLabels: null,\n    zoom: null,\n    selectedNode: null,\n    legend: null\n  };\n\n  new ResizeSensor(rootNode, debounce(() => update(props), 100));\n\n  function update(nextProps) {\n    nextProps = {\n      ...nextProps,\n      width: rootNode.clientWidth,\n      height: rootNode.clientHeight,\n      hasSearch: nextProps.hasSearch\n    };\n\n    const dataUpdated = !allEqProps(\n      [\"hierarchyConfig\", \"data\", \"fields\", \"queryString\"],\n      props,\n      nextProps\n    );\n\n    const sizeUpdated = !allEqProps([\"width\", \"height\"], props, nextProps);\n\n    const legendUpdated = !allEqProps([\"coloredField\", \"data\"], props, nextProps);\n\n    props = nextProps;\n\n    if (dataUpdated) {\n      repack(props, state);\n    }\n\n    rerender(props, state);\n\n    if (legendUpdated) {\n      resetLegend(props, state);\n    } else {\n      state.legend && state.legend.update({ nodes: state.nodes })\n    }\n\n    if (sizeUpdated || dataUpdated) {\n      resetZoom(props, state);\n    }\n  }\n\n  const repack = (props, state) => {\n    const hierarchy = makeHierarchy(props.data, props.hierarchyConfig);\n\n    const pack = packWithLabel().size([props.width, props.height]);\n\n    // Pack once without padding to calculate the radius of the leaf node\n    // then repack with new padding, similar to how d3-pack\n    // works when the size is not given.\n    //\n    // This way spacing between leaf nodes is consistent between visualizations.\n    //\n    // Doesn't seem to have a noticable performance impact.\n    const packed = pack(hierarchy);\n    const padding = packed.leaves()[0].r;\n    pack.padding((d) => padding * d.height);\n\n    state.packedData = pack(hierarchy);\n  };\n\n  const rerender = (props, state) => {\n    const [nodes, labels, countLabels] = appendCircles({\n      nodeRoot: nodeRoot,\n      labelRoot: labelRoot,\n      packedData: state.packedData,\n      showNodes: props.showNodes,\n      hasSearch: props.queryString !== ''\n    });\n\n    setupTooltip({\n      tooltip: tooltip,\n      fields: props.fields,\n      nodeRoot: nodeRoot\n    });\n\n    state.nodes = nodes;\n    state.labels = labels;\n    state.countLabels = countLabels;\n  };\n\n  const resetLegend = (props, state) => {\n    state.legend = setupLegend({\n      legend: legend,\n      hierarchyConfig: props.hierarchyConfig,\n      data: props.data,\n      coloredField: props.coloredField\n    });\n\n    if(state.legend != null){\n      state.legend.update({ nodes: state.nodes })\n    }\n  };\n\n  const resetZoom = (props, state) => {\n    state.zoom = setupZoom({\n      zoomRoot: zoomRoot,\n      transformRoot: transformRoot,\n      nodes: state.nodes,\n      labels: state.labels,\n      countLabels: state.countLabels,\n      width: props.width,\n      height: props.height,\n      packedData: state.packedData\n    });\n\n    let animate = true;\n\n    if (state.selectedNode) {\n      const selected = findAncestor(state.selectedNode, state.packedData);\n      state.selectedNode = selected;\n      animate = false; // smarter animation??\n    } else {\n      state.selectedNode = state.packedData;\n    }\n\n    state.zoom.zoomTo(state.selectedNode, animate);\n\n    nodeRoot.on(\"click.select\", () => {\n      const datum = select(d3Event.target).datum();\n      state.selectedNode = datum;\n      state.zoom.zoomTo(datum);\n    });\n  };\n\n  return {\n    update\n  };\n}\n\nconst allEqProps = (props, o1, o2) => allPass(map(eqProps, props))(o1, o2);\n\nconst makeHierarchy = (data, hierarchyConfig) => {\n  const hierarchy = toHierarchy(data, hierarchyConfig).count();\n\n  const byUnknown = (a, b) => {\n    if (a.data.fieldValue === \"Unknown\") {\n      return b.data.fieldValue === \"Unknown\" ? 0 : 1;\n    } else {\n      return b.data.fieldValue === \"Unknown\" ? -1 : 0;\n    }\n  };\n\n  const bySize = (a, b) => (b.value || 0) - (a.value || 0);\n  const byName = (a, b) =>\n    (a.data.fieldValue || \"\").localeCompare(b.data.fieldValue || \"\");\n\n  return hierarchy.sort(composeComparators([byUnknown, bySize, byName]));\n};\n\n/**\n * Combine a list of comparator function ( (a, b) => Boolean )\n * in order into a single comparator.\n */\nconst composeComparators = (comparators) => (a, b) =>\n  reduceWhile(\n    (result) => result === 0, // keep comparing while a === b\n    (_, comparator) => comparator(a, b),\n    0,\n    comparators\n  );\n\n/**\n * Find the lowest ancestors of a node (or it self) that exists in a tree.\n */\nconst findAncestor = (node, hierarchy) => {\n  const path = reverse(node.ancestors());\n  const findChild = (parent, child) => {\n    return find(eqBy(datumKey, child), parent.children || []);\n  };\n\n  const res = reduce(\n    (last, child) => findChild(last, child) || reduced(last),\n    hierarchy,\n    tail(path)\n  );\n  return res;\n};\n\nexport default d3Viz;\n","import React from \"react\";\nimport ReactDOM from 'react-dom';\n\nimport { connect } from \"react-redux\";\n\nimport { selectDataset, selectConfiguration } from \"domain/dataset\";\nimport { getQueryString } from \"epics/index-dataset-epic\";\nimport { selectControls } from \"domain/controls\";\n\nimport d3Viz from './d3-viz';\nimport styles from './Visualization.module.css';\n\nclass Visualization extends React.PureComponent {\n\n  componentDidMount() {\n    const el = ReactDOM.findDOMNode(this);\n    this.viz = d3Viz(el);\n    this.updateFromProps();\n  }\n\n  updateFromProps() {\n    this.viz.update({\n      hierarchyConfig: this.props.controls.hierarchyConfig,\n      fields: this.props.configuration.fields,\n      showNodes: this.props.controls.shouldShowNodes,\n      coloredField: this.props.controls.colorBy,\n      data: this.props.dataset,\n      queryString: this.props.queryString\n    });\n  }\n\n  componentDidUpdate() {\n    this.updateFromProps();\n  }\n\n  render() {\n    return <div className={ styles.viz }></div>;\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    dataset: selectDataset(state),\n    configuration: selectConfiguration(state),\n    controls: selectControls(state),\n    queryString: getQueryString(state)\n  };\n};\n\nexport default connect(mapStateToProps, null)(Visualization);\n","import { createAction } from 'redux-actions';\nimport { ofType } from 'redux-observable';\nimport {  timer } from 'rxjs';\nimport { mergeMap, mapTo, takeUntil, debounceTime } from 'rxjs/operators';\n\n\nimport { fetchDataset } from './fetch-dataset-epic';\n\n// ACTIONS\nconst startRefresh = createAction('START_REFRESH_DATASET');\nconst stopRefresh = createAction('STOP_REFRESH_DATASET');\n\n// EPIC\nconst refreshDatasetEpic = (action$, store) => {\n  return action$.pipe(\n    ofType(startRefresh.toString())\n    ,debounceTime(500)\n    ,mergeMap((action) => {\n      const url = action.payload.url;\n      const header = action.payload.header;\n      const interval = action.payload.interval * 1000;\n      return timer(0, interval).pipe(\n        mapTo(fetchDataset({ 'url': url, 'header':header}))\n        ,takeUntil(action$.ofType(stopRefresh.toString()))\n        )\n    })  \n  );\n}\n\nexport default refreshDatasetEpic;\nexport { startRefresh, stopRefresh };","import { createAction } from \"redux-actions\";\nimport { Observable, empty } from \"rxjs\";\nimport { catchError, debounceTime, mergeMap, map } from 'rxjs/operators';\n\nimport { loadDataset, CSVconvert } from './load-dataset-epic';\n\n// ACTIONS\nconst uploadDataset = createAction(\"UPLOAD_DATASET\");\n\n// EPIC\nconst uploadDatasetEpic = (action$, store) => {\n  return action$\n    .ofType(uploadDataset.toString()).pipe(\n      mergeMap((action) => {\n        const file = action.payload;\n        return fromReader(file).pipe(\n            debounceTime(500)\n            ,map(CSVconvert)\n            ,map(JSON.parse)\n            ,map(loadDataset)\n            ,catchError((error) => {\n              if (error instanceof SyntaxError) {\n                alert(\"Invalid JSON.\");\n                return empty();\n              } else {\n                throw error;\n              }\n            })\n          )\n      })\n    );\n};\n\n/**\n * Little function to create an observable to read local files.\n * RxJS DOM v5 doesn't have it!?\n */\nconst fromReader = (file) => {\n  return Observable.create((observer) => {\n    const reader = new window.FileReader();\n\n    reader.addEventListener('load', () => {\n      observer.next(reader.result);\n      observer.complete();\n    });\n\n    reader.addEventListener('error', () => {\n      observer.error(reader.error);\n      observer.complete();\n    });\n\n    reader.readAsText(file)\n  });\n}\n\nexport default uploadDatasetEpic;\nexport { uploadDataset };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isNil, find, propEq } from \"ramda\";\n\nfunction DatasetSelector({ className, selected, datasets, onChange }) {\n  return (\n    <div className={className}>\n      <select\n        onChange={(evt) => onChange(find(eqUrl(evt.target.value), datasets)) }\n        value={isNil(selected) ? \"\" : selected.url}\n      >\n        <option value=\"\">&mdash;None&mdash;</option>\n        {datasets.map((dataset) => {\n          return (\n            <option key={dataset.url} value={dataset.url}>\n              {dataset.name}\n            </option>\n          );\n        })}\n      </select>\n    </div>\n  );\n}\n\nconst eqUrl = propEq(\"url\");\n\nconst PropTypesDataset = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired\n});\n\nDatasetSelector.propTypes = {\n  className: PropTypes.string,\n  selected: PropTypesDataset,\n  datasets: PropTypes.arrayOf(PropTypesDataset).isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default DatasetSelector;\n","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { isNil } from \"ramda\";\n\nimport { FontAwesomeIcon }from \"@fortawesome/react-fontawesome\";\nimport { faUpload } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction DatasetUpload({ className, selected, onChange }) {\n  return (\n    <span className={ className }>\n      <input\n        type=\"file\"\n        id=\"file-input\"\n        value=''\n        onChange={(evt) => onChange(evt.target.files[0])}\n      />\n\n    <span>\n      { isNil(selected) ? \"No file selected\" : selected }\n    </span>\n\n      <label htmlFor=\"file-input\" className=\"button\">\n        <FontAwesomeIcon icon={faUpload} />\n      </label>\n    </span>\n  );\n}\n\nDatasetUpload.propTypes = {\n  className: PropTypes.string,\n  selected: PropTypes.string,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default DatasetUpload;\n","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction DatasetDownload({ className, selected, url }) {\n  return (\n    <span className={ className }>\n      <a className=\"button\" href={ url } download={ selected + \".json\" }\n        title=\"Download\">\n        <FontAwesomeIcon icon={faDownload} />\n      </a>\n    </span>\n  );\n}\n\nDatasetDownload.propTypes = {\n  className: PropTypes.string,\n  selected: PropTypes.string,\n  url: PropTypes.string\n};\n\nexport default DatasetDownload;\n","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faRedoAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction DatasetRefresh({ className, onClick }) {\n  return (\n    <span className={ className }>\n      <div className=\"button\" title=\"Refresh\" onClick={() => onClick()}>\n        <FontAwesomeIcon icon={faRedoAlt} />\n      </div>\n    </span>\n  );\n}\n\nDatasetRefresh.propTypes = {\n  className: PropTypes.string,\n  onClick: PropTypes.func.isRequired\n};\n\nexport default DatasetRefresh;\n","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSyncAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { faStopCircle } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction DatasetRefresh({ className, interval, timerIsRunning, onIntervalChange, onStartClick, onStopClick }) {\n  return (\n    <span className={ className }>\n      <input type='text' value={interval} onChange={(evt) => onIntervalChange(evt.target.value)}/>\n      {!timerIsRunning &&\n\t      <div className=\"button\" title=\"Start Refresh Timer\" onClick={() => onStartClick()}>\n\t        <FontAwesomeIcon icon={faSyncAlt} />\n\t      </div>\n  \t  }\n  \t  {timerIsRunning &&\n\t      <div className=\"button\" title=\"Stop Refresh Timer\" onClick={() => onStopClick()}>\n\t        <FontAwesomeIcon icon={faStopCircle} />\n\t      </div>\n  \t  }\n    </span>\n  );\n}\n\nDatasetRefresh.propTypes = {\n  className: PropTypes.string,\n  interval: PropTypes.number,\n  timerIsRunning: PropTypes.bool,\n  onIntervalChange: PropTypes.func.isRequired,\n  onStartClick: PropTypes.func.isRequired,\n  onStopClick: PropTypes.func.isRequired\n};\n\nexport default DatasetRefresh;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { isNil } from \"ramda\";\nimport Modal from 'react-modal';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCheck, faTimes } from \"@fortawesome/free-solid-svg-icons\";\n\nimport { fetchDataset, buildAuthHeader } from \"epics/fetch-dataset-epic\";\nimport { startRefresh, stopRefresh } from \"epics/refresh-dataset-epic\";\nimport { uploadDataset } from \"epics/upload-dataset-epic\";\nimport { showNodes, setHierarchyConfig, colorBy } from \"domain/controls\"\nimport { setDataset, selectDataset } from \"domain/dataset\";\n\nimport DatasetSelector from \"./DatasetSelector\";\nimport DatasetUpload from \"./DatasetUpload\";\nimport DatasetDownload from \"./DatasetDownload\";\nimport DatasetRefresh from \"./DatasetRefresh\";\nimport DatasetTimedRefresh from \"./DatasetTimedRefresh\";\n\nimport style from \"./DatasetControls.module.css\";\n\nconst CUSTOM_DATASET = {\n  name: \"Custom URL\",\n  url: \"custom-url\"\n};\n\nconst authTypes = [\n  {'name': '-None-', 'scheme':'None' },\n  {'name': 'Username\\\\Password', 'scheme':'Basic' },\n  {'name': 'Token', 'scheme':'Bearer' },\n];\n\nvar host = window.location.host;\nvar hostname = window.location.hostname;\nvar port = '80';\nconst radix = 10;\nif (host.indexOf(':') > -1) {\n  port = String(parseInt(host.split(\":\")[1], radix)-1);\n}\n\nvar POSEIDON_DATASET = {\n  name: \"Poseidon Network\",\n  url: \"http://\"+hostname+\":\"+port+\"/v1/network\"\n};\n\nModal.setAppElement('#root');\n\nclass DatasetControls extends React.Component {\n\n  state = {\n    dataset: null,\n    selected: null,\n    selectedFile: null,\n    showUrlEntry: false,\n    url: '',\n    authScheme:'',\n    token: '',\n    username: '',\n    password: '',\n    refreshInterval: 0,\n    refreshTimerRunning: false\n  };\n\n  resetDataset = () => {\n    this.props.setDataset({ dataset: [], configuration: {} });\n    this.setState({\n      selected: null,\n      selectedFile: null\n    });\n  }\n\n  fetchAndSetDataset = (url, dataset, username, password, token) => {\n\n    const authHeader = buildAuthHeader(username, password, token);\n    if (toURL(url)) {\n      this.props.fetchDataset({'url': url, 'header': authHeader});\n      this.setState({\n        selected: dataset,\n        selectedFile: null\n      });\n    } else {\n      alert(\"Please enter a valid URL.\");\n    }\n  }\n\n  onSelected = (dataset) => {\n    if (isNil(dataset)) {\n      return this.resetDataset();\n    }\n\n    this.props.setHierarchyConfig([]);\n    this.props.colorBy(null);\n    this.props.showNodes(true);\n    this.props.stopRefresh();\n\n    const showUrlEntry = dataset === CUSTOM_DATASET;\n    this.setState({ \n      showUrlEntry: showUrlEntry,\n      url: '',\n      authScheme:null,\n      token: '',\n      username: '',\n      password: '',\n      refreshInterval: 0,\n      refreshTimerRunning: false,\n     });\n    if(!showUrlEntry)\n    {\n      const url = dataset.url;\n      this.fetchAndSetDataset(url, dataset, null, null, null);\n    }\n  }\n\n  onUpload = (file) => {\n    this.props.setHierarchyConfig([]);\n    this.props.colorBy(null);\n    this.props.uploadDataset(file);\n    this.props.stopRefresh();\n    this.setState({\n      selected: null,\n      selectedFile: file.name,\n      refreshInterval: 0,\n      refreshTimerRunning: false\n    });\n  }\n\n  onUrlChange = (evt) => {\n    this.setState({ url: evt.target.value });\n  }\n\n  onTokenChange = (evt) => {\n    this.setState({ token: evt.target.value });\n  }\n\n  onUsernameChange = (evt) => {\n    this.setState({ username: evt.target.value });\n  }\n\n  onPasswordChange = (evt) => {\n    this.setState({ password: evt.target.value });\n  }\n\n  onUrlOk = () => {\n    this.setState({ showUrlEntry: false });\n    const dataset = CUSTOM_DATASET;\n    if(!isNil(this.state.url))\n    {\n      const url = this.state.url;\n      dataset.url = url;\n      this.fetchAndSetDataset(url, dataset, this.state.username, this.state.password, this.state.token);\n    }\n  }\n\n  onUrlCancel = () => {\n    this.setState({ \n      showUrlEntry: false,\n      url: '',\n      authScheme:'',\n      token: '',\n      username: '',\n      password: '',\n     });\n  }\n\n  getDownloadUrl = () => {\n    const urlObject = window.URL || window.webkitURL || window;\n    const json = JSON.stringify({'dataset': this.props.dataset});\n    const blob = new Blob([json], {'type': \"application/json\"});\n    const url = urlObject.createObjectURL(blob);;\n    return url;\n  }\n\n  onRefresh = () =>{\n    const url = this.state.selected.url;\n    const dataset = this.state.selected;\n    this.fetchAndSetDataset(url, dataset, this.state.username, this.state.password, this.state.token);\n  }\n\n  onTimedRefreshStart = () =>{\n    this.setState({\n      refreshTimerRunning: true\n    });\n    const authHeader = buildAuthHeader(this.state.username, this.state.password, this.state.token);\n    const url = this.state.selected.url;\n    const interval = this.state.refreshInterval;\n    this.props.startRefresh({'url': url, 'header': authHeader, 'interval': interval});\n  }\n\n  onTimedRefreshStop = () =>{\n    this.setState({\n      refreshTimerRunning: false\n    });\n    this.props.stopRefresh();\n  }\n\n  onTimedRefreshIntervalChanged = (interval) =>{\n    const numInt = parseInt(interval, 10);\n    if(!isNaN(numInt)){\n      this.setState({\n        refreshInterval: numInt,\n      });\n    }\n  }\n\n  render() {\n    if (port === '80') {\n      POSEIDON_DATASET = {name:\"\",url:\"\"};\n    }\n    const canDownload = this.state.selected && !this.state.selectedFile;\n    const canRefresh = this.state.selected && !isNil(this.state.selected.url)\n    return (\n      <div className={style.dataControls}>\n        <div className={style.selectorContainer}>\n          <span className={style.label}>Dataset</span>\n          <DatasetSelector\n            className={style.selector}\n            selected={this.state.selected}\n            onChange={this.onSelected}\n            datasets={[...this.props.datasets, POSEIDON_DATASET, CUSTOM_DATASET]}\n          />\n        </div>\n\n        <div className={style.uploadContainer}>\n          <span className={style.label}>Upload</span>\n          <DatasetUpload\n            className={style.fileUpload}\n            selected={this.state.selectedFile}\n            onChange={this.onUpload}\n          />\n        </div>\n\n          <div className={style.utilityContainer}>\n          { canDownload &&\n            <DatasetDownload\n              className={style.fileDownload}\n              selected={this.state.selected.name}\n              url={this.getDownloadUrl()}\n            />\n          }\n          { canRefresh &&\n            <div className={style.urlRefreshContainer}>\n              <DatasetRefresh\n                className={style.urlRefresh}\n                onClick={this.onRefresh}\n              />\n              <DatasetTimedRefresh\n                className={style.urlRefresh}\n                interval={this.state.refreshInterval}\n                timerIsRunning={this.state.refreshTimerRunning}\n                onIntervalChange={this.onTimedRefreshIntervalChanged}\n                onStartClick={this.onTimedRefreshStart}\n                onStopClick={this.onTimedRefreshStop}\n              />\n            </div>\n          }\n          </div>\n          <Modal isOpen={ this.state.showUrlEntry } onRequestClose={this.onUrlCancel} contentLabel=\"Enter a Url\">\n            <div className={ style.modal }>\n              <div className={ style.modalMain }>\n                <span>\n                  <label> URL </label>\n                  <input type=\"text\" value={this.state.url} onChange={ this.onUrlChange }/>\n                </span>\n                <span>\n                  <label> AuthType </label>\n                  <select\n                    onChange={(evt) => this.setState({ authScheme: evt.target.value })}\n                    value={isNil(this.state.authScheme) ? '' : this.state.authScheme}\n                  >\n                    {authTypes.map((at) => {\n                      return (\n                        <option key={at.scheme} value={at.scheme}>\n                          {at.name}\n                        </option>\n                      );\n                    })}\n                  </select>\n                </span>\n                { this.state.authScheme === 'Bearer' &&\n                  <span>\n                    <label> Token </label>\n                    <input type=\"text\" value={this.state.Token} onChange={ this.onTokenChange }/>\n                  </span> \n                }\n                { this.state.authScheme === 'Basic' &&\n                  <div>\n                    <span>\n                      <label> Username </label>\n                      <input type=\"text\" value={this.state.userName} onChange={ this.onUsernameChange }/>\n                    </span>\n                    <span>\n                      <label> Password </label>\n                      <input type=\"password\" value={this.state.password} onChange={ this.onPasswordChange }/>\n                    </span>\n                  </div>\n                }\n                <div>\n                  <span className={ style.centerSpan }>\n                    <div className=\"button\" title=\"Ok\" onClick={this.onUrlOk}>\n                        <FontAwesomeIcon icon={faCheck} />\n                    </div>\n                    <div className=\"button\" title=\"Cancel\" onClick={this.onUrlCancel}>\n                        <FontAwesomeIcon icon={faTimes} />\n                    </div>\n                  </span>\n                </div>\n              </div>\n            </div>\n          </Modal>\n      </div>\n    );\n  }\n}\n\nconst toURL = (url) => {\n  try {\n    return new URL(url)\n  } catch(error) {\n    if (error instanceof TypeError) {\n      return null;\n    } else {\n      throw error;\n    }\n  }\n}\n\nDatasetControls.defaultProps = {\n  datasets: [],\n  dataset: null\n};\n\nDatasetControls.propTypes = {\n  datasets: PropTypes.array,\n  dataset: PropTypes.array,\n  fetchDataset: PropTypes.func.isRequired,\n  uploadDataset: PropTypes.func.isRequired,\n  setDataset: PropTypes.func.isRequired,\n  showNodes: PropTypes.func.isRequired,\n  setHierarchyConfig: PropTypes.func.isRequired, \n  colorBy: PropTypes.func.isRequired,\n  startRefresh: PropTypes.func.isRequired,\n  stopRefresh: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    dataset: selectDataset(state),\n  };\n}\n\nconst mapDispatchToProps = {\n  fetchDataset,\n  uploadDataset,\n  setDataset,\n  selectDataset,\n  showNodes,\n  setHierarchyConfig, \n  colorBy,\n  startRefresh,\n  stopRefresh\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DatasetControls);\n","import React, { Component } from \"react\";\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\n\nimport { selectDataset } from 'domain/dataset';\nimport { selectControls } from 'domain/controls';\n\nimport Header from 'features/header/Header';\nimport HierarchySelector from 'features/hierarchy-selector/HierarchySelector';\nimport MiscControls from 'features/misc-controls/MiscControls';\nimport SearchControls from 'features/search/SearchControls';\nimport Visualization from 'features/visualization/Visualization';\nimport DatasetControls from 'features/dataset-controls/DatasetControls';\n\nimport style from './App.module.css';\n\nimport datasets from './datasets';\n\nclass App extends Component {\n  render() {\n    const { dataset, darkTheme } = this.props;\n\n    const hasDataset = dataset && dataset.length > 0;\n\n    return (\n      <div className={\n          classNames({\n            [style.appContainer]: true,\n            'darkTheme': darkTheme\n          })\n      }>\n        <input name=\"hideControls\" id=\"hideControls\" type=\"checkbox\" />\n        <label htmlFor=\"hideControls\" className={ style.hideControls }>\n          { /* <FontAwesomeIcon icon={faChevron} /> */ }\n          <span>&lt;&lt;</span>\n        </label>\n        <div className={ style.controls }>\n          <Header />\n          <div className={ style.section }>\n            <DatasetControls datasets={ datasets }/>\n          </div>        \n\n          { hasDataset &&\n            <div className={ style.section }>\n              <SearchControls />\n            </div>\n          }\n\n          { hasDataset &&\n            <div className={ classNames(style.section, style.hierarchySection) }>\n              <HierarchySelector />\n            </div>\n          }\n\n          { hasDataset &&\n            <div className={ style.section }>\n              <MiscControls />\n            </div>\n          }\n        </div>\n\n        <div className={ style.canvas }>\n          <Visualization />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  dataset: selectDataset(state),\n  darkTheme: selectControls(state).darkTheme\n});\n\nexport default connect(mapStateToProps)(App);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from \"redux\";\nimport { searchReducer as search } from 'epics/index-dataset-epic'\nimport dataset from \"./dataset\";\nimport controls from \"./controls\";\n\nexport default combineReducers({\n  dataset,\n  search,\n  controls\n});\n","import { combineEpics } from 'redux-observable';\nimport fetchDatasetEpic from './fetch-dataset-epic';\nimport uploadDatasetEpic from './upload-dataset-epic';\nimport loadDatasetEpic from './load-dataset-epic';\nimport searchDatasetEpic from './search-dataset-epic';\nimport indexDatasetEpic from './index-dataset-epic';\nimport refreshDatasetEpic from './refresh-dataset-epic';\n\nconst rootEpic = combineEpics(\n  loadDatasetEpic,\n  fetchDatasetEpic,\n  uploadDatasetEpic,\n  searchDatasetEpic,\n  indexDatasetEpic,\n  refreshDatasetEpic\n);\n\nexport default rootEpic;\n","import { createStore, applyMiddleware, compose } from \"redux\";\n\nimport { createEpicMiddleware } from 'redux-observable';\nimport rootReducer from './domain/root-reducer';\nimport rootEpic from './epics/root-epic';\n\n// Replace redux compose with redux-devtools compose if it exists\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst configureStore = (initialState = {}) => {\n  const middleware = createEpicMiddleware()\n\n  const store = createStore(rootReducer,\n    initialState,\n    composeEnhancers(\n      applyMiddleware(middleware)\n    )\n  );\n\n  middleware.run(rootEpic);\n\n  return store;\n};\n\nexport default configureStore;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport \"index.css\";\nimport App from \"./App\";\nimport registerServiceWorker from \"./registerServiceWorker\";\n\nimport configureStore from \"./configure-store\";\n\nconst store = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nregisterServiceWorker();\n\nif (module.hot) {\n  module.hot.accept(\"./App\", () => {\n    ReactDOM.render(\n      <Provider store={store}>\n        <App />\n      </Provider>,\n      document.getElementById(\"root\")\n    );\n  });\n}\n","import { ofType } from 'redux-observable';\nimport { isNil } from \"ramda\";\nimport { of } from \"rxjs\";\nimport { mergeMap, map } from 'rxjs/operators';\n\nimport { configurationFor } from \"domain/dataset\";\n\nconst getValue = require(\"get-value\");\nconst lunr = require(\"lunr\");\n\nconst BUILD_INDEX = \"BUILD_INDEX\";\nconst BUILD_INDEX_SUCCESS = \"BUILD_INDEX_SUCCESS\";\n//const BUILD_INDEX_FAILURE = \"BUILD_INDEX_FAILURE\";\nconst SET_SEARCH_RESULTS = \"SET_SEARCH_RESULTS\";\n\nconst buildIndex = (payload) => ({'type': BUILD_INDEX, 'payload': payload })\nconst buildIndexSuccess = (payload) => ({'type': BUILD_INDEX_SUCCESS, 'payload': payload})\nconst setSearchResults = (payload) => ({'type': SET_SEARCH_RESULTS, 'payload': payload })\n\nconst getSearchResults = (state) => state.search.searchResults || [];\nconst getQueryString = (state) => state.search.queryString;\nconst getSearchIndex = (state) => state.search.searchIndex;\n\nconst indexDatasetEpic = (action$, store) => {\n  return action$.pipe(\n      ofType(BUILD_INDEX)\n      ,mergeMap(({ payload }) => {\n        return of(payload).pipe(\n            map(generateIndex)\n            ,map((payload) =>\n              buildIndexSuccess(payload)\n            )\n          );\n      })\n    );\n};\n\nconst searchReducer = (state = { searchIndex: null, queryString: '', searchResults: null }, action) => {\n  switch (action.type) {\n    case BUILD_INDEX_SUCCESS:\n      const searchIndex = action.payload\n      return {...state, searchIndex};\n    case \n    SET_SEARCH_RESULTS: \n      const searchResults = action.payload.results;\n      const queryString = action.payload.queryString;\n      return { ...state, searchResults, queryString}\n    default:\n      return state;\n  }\n}\n\nconst flattenDataset = (ds, cfg) => {\n  var flattened = [];\n\n  if(isNil(cfg))\n    return flattened;\n\n  for(var key in ds){\n    var item = {'id':key};\n    for(var f in cfg.fields){\n      var field = cfg.fields[f];\n\n      var name = field.displayName\n      item[name] = getValue(ds[key], field.displayName);\n    }\n    flattened.push(item);\n  }\n  return flattened;\n}\n\nconst generateIndex = (payload) => {\n  const dataset = payload.dataset;\n  const configuration = payload.configuration || configurationFor(dataset);\n  var flat = flattenDataset(dataset, configuration);\n  const idx = lunr(function () {\n    this.ref('id');\n    if(configuration && configuration.fields){\n      configuration.fields.map((field) => { return this.field(field.displayName.toLowerCase()); })\n    }\n    flat.map((item) => { return this.add(item); })\n  });\n  return idx;\n};\n\nexport default indexDatasetEpic;\n\nexport { buildIndex, searchReducer,  getSearchIndex, setSearchResults, getSearchResults, getQueryString };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"App_appContainer__QtPXV\",\"controls\":\"App_controls__2wA6i\",\"section\":\"App_section__s3xOK\",\"hierarchySection\":\"App_hierarchySection__2fUkf\",\"canvas\":\"App_canvas__1fY9M\",\"hideControls\":\"App_hideControls__2GMem\"};","import { createAction } from 'redux-actions';\nimport { ofType } from 'redux-observable';\nimport { empty } from 'rxjs';\nimport { ajax  as rxAjax } from 'rxjs/ajax';\nimport { catchError, debounceTime, mergeMap, map } from 'rxjs/operators';\n\nimport { loadDataset } from './load-dataset-epic';\n\n// ACTIONS\nconst fetchDataset = createAction('FETCH_DATASET');\n\n// EPIC\nconst fetchDatasetEpic = (action$, store, ajax = rxAjax) => {\n  return action$.pipe(\n    ofType(fetchDataset.toString())\n    ,debounceTime(500)\n    ,mergeMap((action) => {\n      const url = action.payload.url\n      const header = action.payload.header\n      return ajax({ 'url': url, 'headers':header, 'crossDomain': true, 'responseType': 'json' }).pipe(\n        map((result) => { \n          return result.response \n        })\n        ,map(loadDataset)\n        // I believe this was done oddly and debounce should have been used\n        // to ensure that file input was only processed once, instead of using take until\n        // which seems to be stopping the epic the second time the action passes through the stream\n        // it seems like this change doesn't change functionality and makes unit testing easier\n        // I intend to do more thorough user testing later\n        //.takeUntil(action$.ofType(fetchDataset.toString()))\n        ,catchError((error) => {\n          alert(\"Failed to fetch dataset. Please try again later.\");\n          return empty();\n        })\n        );\n    })\n    );\n}\n\nconst getScheme = (username, password, token) =>{\n   let scheme = 'None';\n    if(token) {\n      scheme = 'Bearer'\n    } else if (username && password) {\n      scheme = 'Basic'\n    }\n    return scheme;\n}\n\nconst buildAuthHeader = (username, password, token) => {\n  let header = null;\n  var scheme = getScheme(username, password, token);\n\n  switch (scheme){\n    case 'Basic':\n       var basic = \"Basic \" + new Buffer(`${username}:${password}`).toString(\"base64\");\n       header = {'Authorization' : basic};\n      break;\n    case 'Bearer':\n      var bearer = `Bearer ${token}`;\n      header = {'Authorization' : bearer};\n      break;\n    default:\n      header = null;\n      break;\n  }\n  \n  return header;\n}\n\nexport default fetchDatasetEpic;\nexport { fetchDataset, buildAuthHeader };","import { createAction } from \"redux-actions\";\nimport { ofType } from 'redux-observable';\nimport { of, empty } from \"rxjs\";\nimport { map, mergeMap, catchError, concat } from 'rxjs/operators';\n\nimport { isNil, is } from \"ramda\";\n\nimport { buildIndex } from './index-dataset-epic';\n\nimport { setDataset } from \"domain/dataset\";\nimport { setHierarchyConfig, colorBy } from \"domain/controls\";\n\nconst loadDataset = createAction(\"LOAD_DATASET\");\n\nconst loadDatasetEpic = (action$, store) => {\n  return action$.pipe(\n    ofType(loadDataset.toString())\n    ,mergeMap(({ payload }) => {\n      return of(payload).pipe(\n        map(formatPayload)\n        ,mergeMap((payload) => {\n          return of(\n            setDataset({\n              dataset: payload.dataset,\n              configuration: payload.configuration\n            })\n            ,buildIndex({\n                dataset: payload.dataset,\n                configuration: payload.configuration || null\n              })\n          )\n        })\n        ,concat(of(setHierarchyConfig(store.value.controls.hierarchyConfig || []), colorBy(store.value.controls.colorBy)))\n        ,catchError((error) => {\n          if (is(ValidationError, error)) {\n            alert(error.message);\n            return empty();\n          } else {\n            throw error;\n          }\n        })\n      );\n    })\n  );\n}; \n\n// doesn't really care if it's not CSV; if it *is* CSV, convert to JSON.\n// Otherwise, just pass it along.\nconst CSVconvert = (data) => {\n  var lines = data.trim().split(/[\\r\\n]+/g);\n  if (lines.length < 2) { // bail if there's not even linebreaks\n    return data;\n  }\n\n  function finddelim(hdr) {\n    var delims = [',','|','\\t',';']\n    var delim = 0\n    var max = -1\n    for (var i=0; i < hdr.length; i++) {\n      if (max < hdr.split(delims[i]).length-1) {\n        max = hdr.split(delims[i]).length-1\n        delim = i\n      }\n    }\n    return delims[delim];\n  }\n\n  var delimiter = finddelim(lines[0])\n  var jsonstring = '['\n  var colnames = lines[0].split(delimiter)\n  for (var i=1; i < lines.length; i++) {\n    var entry = lines[i].split(delimiter)\n    if (entry.length !== colnames.length) { // malformed CSV, or not even CSV.\n      return data;\n    }\n    jsonstring += \"{ \"\n    for (var j=0; j < colnames.length; j++) {\n      jsonstring += '\"'+colnames[j]+'\": \"'+entry[j]+'\"';\n      if (j < colnames.length-1 ) {\n        jsonstring += \", \"\n      } else {\n        jsonstring += \" }\"\n        if (i < lines.length-1) {\n          jsonstring += \",\\n\"\n        }\n      }\n    }\n  }\n  jsonstring += ']'\n  return jsonstring;\n}\n\n//if we have a naked array or an object not containing a dataset instead of an object containing a dataset\n//transfer the array into an object's dataset to maintain a consistent\n//schema with what is used elsewhere see https://github.com/CyberReboot/CRviz/issues/33\nconst formatPayload = (data) => {\n  var config = data.configuration;\n  var temp = {};\n  if(!isNil(data.dataset) && is(Array, data.dataset)){\n    temp = data.dataset;\n  } else if(isNil(data.dataset) && is(Array, data)) {\n    temp  = data;\n  } else if(isNil(data.dataset)) {\n    let obj = {};\n    Object.entries(data).forEach( (entry) =>{\n      let key = entry[0];\n      let value = entry[1]\n      obj[key] = value;\n      })\n    temp = [obj];\n  } else {\n    throw ValidationError('Data in invalid format');\n  }\n\n  data = {'dataset': temp, 'configuration': config};\n  return data;\n};\n\nfunction ValidationError(message) {\n  this.name = 'ValidationError';\n  this.message = message;\n}\n\nValidationError.prototype = Object.create(Error.prototype);\n\nexport default loadDatasetEpic;\n\nexport { loadDataset, CSVconvert };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkboxContainer\":\"MiscControls_checkboxContainer__3qEun\",\"colorBy\":\"MiscControls_colorBy__36jis\",\"fieldSelect\":\"MiscControls_fieldSelect__23xNi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__22iYy\",\"logo\":\"Header_logo__1Q9PB\",\"appName\":\"Header_appName__3ZkiC\",\"infoIcon\":\"Header_infoIcon__37dfu\",\"infoPopup\":\"Header_infoPopup__vFXpZ\",\"tagline\":\"Header_tagline__2wfq6\"};","import { createAction, handleActions } from \"redux-actions\";\nimport {\n  chain,\n  concat,\n  find,\n  fromPairs,\n  identity,\n  is,\n  map,\n  merge,\n  path,\n  pipe,\n  propEq,\n  sortBy,\n  toPairs,\n  uniq\n} from \"ramda\";\n\nconst defaultState = {\n  dataset: [],\n  values: {},\n  configuration: {\n    fields: []\n  }\n};\n\n/**\n * Return a string that uniquely identify the field\n */\nconst getFieldId = (field) => field.path.join(\".\")\n\n/**\n * Returns an array of paths to literal values and arrays in a POJO.\n *\n * Example:\n * pathsIn({ a: 'A', b: { c: 'C', d: [1, 2] } }) //=> [['a'], ['b', 'c'], ['b', 'd']]\n */\nconst pathsIn = (obj) =>\n  chain(\n    ([key, value]) =>\n      is(Object, value) ? map(concat([key]), pathsIn(value)) : [[key]],\n    toPairs(obj)\n  );\n\n/**\n * Return all fields for an object\n */\nconst fieldsFor = (obj, overrides = []) => {\n  const paths = pathsIn(obj);\n  return map((path) => {\n    const override = find(propEq('path', path), overrides) || {};\n    return merge(\n      {\n        path: path,\n        displayName: path.join('.'),\n        groupable: true\n      },\n      override\n    )\n  }, paths);\n\n  // var fields = difference(pathsIn(obj), map(prop('path'), overrides));\n  // return [\n  //   ...overrid,\n  //   ...map(\n  //     (path) => ({\n  //       path: path,\n  //       displayName: path.join(\".\"),\n  //       groupable: true\n  //     }),\n  //     unspecified\n  //   )\n  // ];\n};\n\n/**\n * Returns a configuration with any missing items populated\n */\nconst configurationFor = (dataset, configuration = {}) => {\n  return {\n    ...configuration,\n    fields: fieldsFor(dataset[0] || {}, configuration.fields)\n  };\n};\n\n\nconst valuesFor = (dataset, configuration) => {\n  return fromPairs(map((field) => {\n    const values = pipe(\n      map(path(field.path)),\n      uniq,\n      sortBy(identity)\n    )(dataset);\n\n    return [getFieldId(field), values];\n  }, configuration.fields));\n};\n\n// ACTIONS\n\n/**\n * Payload: {\n *   dataset: [], // Array of devices\n *   configuration: {} // Configuration\n * }\n*/\nconst setDataset = createAction(\"SET_DATASET\");\n\n// REDUCERS\nconst reducer = handleActions(\n  {\n    [setDataset]: (state, { payload }) => {\n      const dataset = payload.dataset;\n\n      const configuration = configurationFor(\n        payload.dataset || [],\n        payload.configuration || {}\n      );\n\n      const values = valuesFor(dataset, configuration);\n\n      return { ...state, dataset, values, configuration };\n    }\n  },\n  defaultState\n);\n\n// SELECTORS\n\nconst selectDataset = (state) => state.dataset.dataset;\nconst selectConfiguration = (state) => state.dataset.configuration;\nconst selectValues = (state) => state.dataset.values;\n\n\nexport default reducer;\n\nexport { setDataset, selectDataset, selectConfiguration, selectValues, getFieldId, configurationFor };\n","import { createAction, handleActions } from \"redux-actions\";\n\nconst defaultState = {\n  hierarchyConfig: [], // Array of fields to group by.\n  shouldShowNodes: true, // Whether to show individual nodes\n  darkTheme: false, // Whether to use dark theme\n  colorBy: null // The field for which to color the devices/groupings by.\n};\n\n// ACTIONS\n\nconst setHierarchyConfig = createAction(\"SET_HIERARCHY_CONFIG\");\nconst showNodes = createAction(\"SHOW_NODES\");\nconst useDarkTheme = createAction(\"USE_DARK_THEME\");\nconst colorBy = createAction(\"COLOR_BY\");\n\nconst reducer = handleActions(\n  {\n    [setHierarchyConfig]: (state, { payload }) => ({ ...state, hierarchyConfig: payload }),\n    [showNodes]: (state, { payload }) => ({ ...state, shouldShowNodes: !!payload }), // Convert payload to boolean for easier debugging\n    [useDarkTheme]: (state, { payload }) => ({ ...state, darkTheme: !!payload }), // Convert payload to boolean for easier debugging\n    [colorBy]: (state, { payload }) => ({ ...state, colorBy: payload })\n  },\n  defaultState\n);\n\nconst selectControls = (state) => state.controls;\n\nexport default reducer;\nexport { setHierarchyConfig, showNodes, colorBy, useDarkTheme, selectControls };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchControls\":\"SearchControls_searchControls__3c9kl\",\"searchContainer\":\"SearchControls_searchContainer__11kME\",\"search\":\"SearchControls_search__1lu7v\",\"label\":\"SearchControls_label__3sWW2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listContainer\":\"SelectedFieldList_listContainer__EIgw3\",\"isDropDisabled\":\"SelectedFieldList_isDropDisabled__1B1mf\",\"droppable\":\"SelectedFieldList_droppable__V3oKO\",\"draggable\":\"SelectedFieldList_draggable__3a12H\",\"field\":\"SelectedFieldList_field__8d6UN\",\"groupBy\":\"SelectedFieldList_groupBy__ePIRe\",\"animated\":\"SelectedFieldList_animated__3juXQ\",\"groupByEnter\":\"SelectedFieldList_groupByEnter__q43mT\",\"fieldName\":\"SelectedFieldList_fieldName__3sCaz\",\"dropTarget\":\"SelectedFieldList_dropTarget__1Gpjc\",\"isDraggingOver\":\"SelectedFieldList_isDraggingOver__3fCS0\",\"dragHandle\":\"SelectedFieldList_dragHandle__2IDAD\"};"],"sourceRoot":""}